<html>
    <head>
        <title>RPDB Folders</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="jquery-3.5.1.js"></script>
        <link rel="stylesheet" href="pure-2.0.5.css">
        <style>
            body {
                padding: 0 5%;
            }
            img {
                border: none;
                padding: none;
            }
            a {
                text-decoration: none;
                color: #0078e7;
            }
            a:hover {
                text-decoration: underline;
            }
            .full-page-dialog {
                width: 100%;
                height: 100%;
                z-index: 10;
                top: 0;
                left: 0;
                position: fixed;
                overflow: scroll;
                background-color: #fff;
                z-index: 1000;
            }
            .current-folder {
                display: inline-block;
                padding: 15px;
                border: 1px solid rgba(0,0,0,0.3);
                max-width: 80%;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
/*                direction: rtl; */
                text-align: left;
                margin-bottom: 20px;
                cursor: pointer;
            }
            .current-folder:hover {
                border: 1px solid rgba(0,120,231,0.3);
            }
            .dialog-title {
                text-align: center;
                font-size: 20px;
                margin: 30px 0;
            }
            .folder-list {
                width: 80%;
            }
            .folder-list .folder-line {
                padding: 15px;
                border-bottom: 1px solid rgba(0,0,0,0.3);
                width: calc(100% - 30px);
                cursor: pointer;
                text-align: left;
            }
            .folder-list .folder-line:hover {
                background-color: rgba(0,0,0,0.1);
            }
            .search-list {
                width: 80%;
            }
            .search-list .folder-line {
                padding: 15px;
                border-bottom: 1px solid rgba(0,0,0,0.3);
                width: calc(100% - 30px);
                cursor: pointer;
                text-align: left;
            }
            .search-list .folder-line:hover {
                background-color: rgba(0,0,0,0.1);
            }
            .poster-choice-img {
                margin: 10px;
                padding: 10px;
                border: 1px solid rgba(0,0,0,0.5);
                cursor: pointer;
            }
            .poster-choice-img:hover {
                border: 1px solid #0078e7;
            }
            #folder-poster-edit-img {
                width: 290px;
                height: 429px;
                max-width: 80%;
                background-color: rgba(0,0,0,0.1);
            }
            #preview-poster-img {
                width: 290px;
                height: 429px;
                max-width: 80%;
                background-color: rgba(0,0,0,0.1);
            }
            #preview-create-poster-img {
                width: 290px;
                height: 429px;
                max-width: 80%;
                background-color: rgba(0,0,0,0.1);
            }
        </style>
    </head>
    <body>
        <center>
            <img src='rpdb-folders.jpg' style="max-width: 160px; padding-top: 10px" />
            <div id="top-links" style="display: none">
                <div style="padding: 5px 15px; padding-bottom: 3px">
                    This application will add "poster.jpg" to movie / series folders using the RPDB API, it will also keep track of and add "poster.jpg" to any new folders that are created.
                    <br/><br/>
                    It has been tested with Plex, Emby and Kodi, but it should update the posters / backdrops for more media center applications also.
                </div>
                <br/><br/>
                <a href="https://ratingposterdb.com/#see-it-in-action" target="_blank">See Screenshots</a>&nbsp;&nbsp;&middot;&nbsp;&nbsp;<a href="https://ratingposterdb.com/api-key" target="_blank">Get API Key</a>
                <br/><br/>
            </div>
            <div>
                <form class="pure-form pure-form-aligned" id="password-check" onsubmit="return set_pass()" style="display: none">
                    <fieldset>
                        <div class="pure-control-group">
                            <input type="password" id="service-pass" placeholder="Password" />
                            <span class="pure-form-message-inline">
                                &nbsp;<button type="submit" class="pure-button pure-button-primary">Load</button>
                            </span>
                            <br/><br/><br/>
                            <label for="remember-me" class="pure-checkbox" style="display: inline-block; opacity: 0.7">
                                <input type="checkbox" id="remember-me" class="optionsCheckbox" value="remember" />&nbsp;&nbsp;Remember Me</label>
                        </div>
                        <br/>
                        <div id="pass-error" style="display: none; opacity: 0.7">Wrong password, try again.</div>
                    </fieldset>
                </form>
                <form class="pure-form pure-form-aligned" id="api-key-form" onsubmit="return set_api_key()" style="display: none">
                    <fieldset>
                        <div class="pure-control-group">
                            <input type="text" id="api-key" placeholder="API Key" />
                            <span class="pure-form-message-inline">
                                &nbsp;<button type="submit" class="pure-button pure-button-primary">Load</button>
                            </span>
                        </div>
                    </fieldset>
                </form>
                <div id="api-key-success" style="display: none; opacity: 0.7">
                    <b id="api-key-success-msg"></b>
                    <br/><br/>
                    <button type="button" class="pure-button pure-button-primary" id="change-api-key">Change API Key</button>
                    <br/><br/><br/>
                </div>
                <div id="api-key-error-1" style="display: none; opacity: 0.7">
                    Error: Using an API key is mandatory.
                    <br/><br/><br/>
                </div>
                <div id="api-key-error-2" style="display: none; opacity: 0.7">
                    Error: API key is not valid, please try again.
                    <br/><br/><br/>
                </div>
            </div>
            <div id="opts-holder" style="display: none">
                <div id="update-check" style="display: none; border: 1px solid rgba(0,0,0,0.3); padding: 20px; margin-bottom: 35px; font-weight: bold"></div>
                <form class="pure-form pure-form-aligned" id="adv-opts-form">
                    <div id="adv-form">
                        <button type="button" class="pure-button" onclick="openPosterSettings()">Poster Settings</button>
                        &nbsp;&nbsp;&nbsp;
                        <button type="button" class="pure-button" onclick="openScanSettings()">Scan Settings</button>
                        <br/><br/><br/>
                        <b>Backdrops</b><br/><br/>
                        <div id="note-tier-3">
                            <i style="opacity: 0.7">Tier 3 (or higher) API keys are required to download backdrops.</i>
                            <br/><br/>
                        </div>
                        <label for="backdrops-option-one" class="pure-checkbox" style="display: inline-block">
                            <input type="checkbox" id="backdrops-option-one" class="optionsCheckboxBackdrops" value="backdrops" disabled="" /> Download Backdrops</label>
                        <br/><br/><br/>
                        <b>Media Folders</b><br/><br/>
                        <div>
                            <span id="watched-folders" style="opacity: 0.7">Watching 0 movie folders and 0 series folders.</span>
                            <br/><br/>
                        </div>
                        <button type="button" class="pure-button pure-button-primary" onclick="openMovieBrowser()">Add Movie Folder</button>
                        &nbsp;&nbsp;&nbsp;
                        <button type="button" class="pure-button pure-button-primary" onclick="openSeriesBrowser()">Add Series Folder</button>
                        <br/><br/>
                        <button type="button" class="pure-button" onclick="editMediaFolder()">Edit Media Folder</button>
                        <br/><br/><br/>
                        <b>History</b><br/><br/>
                        <div id="history-msg" style="opacity: 0.7">Added images to 0 folders.</div>
                        <br/>
                        <button type="button" class="pure-button" onclick="openChooseFolderTypes('movie')">Edit Movie Poster</button>
                        &nbsp;&nbsp;&nbsp;
                        <button type="button" class="pure-button" onclick="openChooseFolderTypes('series')">Edit Series Poster</button>
                        <br/><br/><br/>
                        <button type="button" class="pure-button" onclick="openCheckRequests()">Check Requests</button>
                        <br/><br/><br/>
                        <button type="button" class="pure-button" onclick="openChoosePassword()">Choose Password</button>
                        <br/><br/><br/>
                        <span id="rpdb-folders-version" style="opacity: 0.7"></span>
                        <br/><br/>
                    </div>
                </form>
            </div>
            <br/><br/>
        </center>
        <div id="check-requests" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Check Requests</h1>
            <div style="text-align: center">
                <div id="request-count"></div>
                <br/><br/>
                <button type="button" class="pure-button" onclick="closeCheckRequests()">Close</button>
                <br/><br/><br/>

            </div>
        </div>
        <div id="add-media-folder" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title" id="add-media-folder-title"></h1>
            <div style="text-align: center">
                <div class="current-folder" onclick="pasteMediaFolder()"></div>
                <br/>
                <button type="button" class="pure-button pure-button-primary" onclick="addFolder()">Add Folder</button>
                &nbsp;&nbsp;&nbsp;
                <button type="button" class="pure-button open-add-badges-button" onclick="openAddBadges()">Add Badges / Label</button>
                &nbsp;&nbsp;&nbsp;
                <button type="button" class="pure-button" onclick="closeBrowser()">Close</button>
                <br/><br/><br/>
                <center>
                    <div class="folder-list">
                    </div>
                </center>

            </div>
        </div>
        <div id="paste-media-folder" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title" id="paste-media-folder-title"></h1>
            <div style="text-align: center">
                Use this feature to manually enter a media folder location instead of browsing for it.
                <br/><br>
                <form class="pure-form pure-form-aligned" id="paste-media-form">
                    <input type="text" id="paste-media-path" placeholder="Media Folder Location" />
                </form>
                <br/>
                <button type="button" class="pure-button pure-button-primary" onclick="addPasteMediaFolder()">Save Location</button>
                <br/><br/>
                <button type="button" class="pure-button" onclick="closePasteMediaFolder()">Close</button>
                <br/><br/><br/>
            </div>
        </div>
        <div id="edit-media-folder" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Edit Media Folders</h1>
            <div style="text-align: center">
                Select a folder in order to edit it's settings.
                <br/><br/><br/>
                <button type="button" class="pure-button" onclick="closeEditMediaFolder()">Close</button>
                <br/><br/><br/>
                <center>
                    <b>Movie Folders</b><br/><br/>
                    <div class="edit-movie-folder-list folder-list">
                    </div>
                    <br/></br/>
                    <b>Series Folders</b><br/><br/>
                    <div class="edit-series-folder-list folder-list">
                    </div>
                </center>

            </div>
        </div>
        <div id="edit-specific-folder" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Edit Media Folder</h1>
            <div style="text-align: center">
                <button type="button" class="pure-button open-add-badges-button" onclick="openAddBadges()">Add Badges / Label</button>
                <br/><br/><br/>
                <b>Scanner Status</b>
                <br/><br/>
                <div class="scan-status" style="padding: 10px; border: 1px solid rgba(0,0,0,0.3); display: inline-block">Idle, not scanning</div>
                <br/><br/>
                <button type="button" class="pure-button" onclick="cancelScan()">Cancel Scan</button>
                <br/><br/><br/><br/>
                <b>Manual Scan Options</b>
                <br/><br/>
                <div>
                    <i style="opacity: 0.7">Scans are done periodically by default, by runing a full scan you initiate a scan manually for this folder.</i>
                    <br/><br/>
                </div>
                <button type="button" class="pure-button" onclick="runFullScanSpecific()">Run Full Scan of Folder</button>
                <br/><br/><br/><br/>
                <div>
                    <i style="opacity: 0.7">Forcing an overwrite will update all posters, refresh all ratings and apply new settings for this folder.</i>
                    <br/><br/>
                </div>
                <button type="button" class="pure-button" onclick="forceOverwriteScanSpecific()">Force Overwrite Scan of Folder</button>
                <br/><br/><br/><br/>
                <button type="button" class="pure-button" onclick="removeSpecificFolder()">Remove Media Folder</button>
                <br/><br/><br/><br/>
                <button type="button" class="pure-button pure-button-primary" onclick="closeEditSpecificFolder()">Close</button>
                <br/><br/><br/>
            </div>
        </div>
        <div id="choose-media-folder-type" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Choose Media Type</h1>
            <br/><br/>
            <div style="text-align: center">
                <button type="button" class="pure-button pure-button-primary" onclick="openMoviePosterEdit()">Movie</button>
                &nbsp;&nbsp;&nbsp;
                <button type="button" class="pure-button pure-button-primary" onclick="openSeriesPosterEdit()">Series</button>
                &nbsp;&nbsp;&nbsp;
                <button type="button" class="pure-button" onclick="closeChooseMediaFolder()">Close</button>
            </div>
        </div>
        <div id="search-folder" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Search Media Folder</h1>
            <div style="text-align: center">
                <form class="pure-form">
                    <input id="search-folder-input" placeholder="Search">
                    &nbsp;&nbsp;
                    <select id="choose-search-folder">
                    </select>
                </form>
                <br/>
                <button type="button" class="pure-button" onclick="closeSearchFolder()">Close</button>
                <br/><br/><br/>
                <center>
                    <div class="search-list">
                    </div>
                </center>
            </div>
        </div>
        <div id="folder-poster-edit" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Poster Edit</h1>
            <div style="text-align: center">
                <img id="folder-poster-edit-img" src="" onerror="if (this.src && !this.src.endsWith('/')) { this.src='/missing-poster.png' }">
                <br/><br/><br/>
                <button type="button" class="fix-match-button pure-button" onclick="openFixMatch()">Fix Match</button>
                &nbsp;&nbsp;&nbsp;
                <button type="button" class="pure-button" onclick="openChoosePoster()">Choose Poster</button>
                &nbsp;&nbsp;&nbsp;
                <button type="button" class="pure-button" onclick="openCustomPoster()">Custom Poster</button>
                <br/><br/>
                <button type="button" class="pure-button" onclick="updateRatingsPoster()">Update Ratings</button>
                &nbsp;&nbsp;&nbsp;
                <button type="button" class="pure-button" onclick="openCreatePoster()">Create Poster</button>
                <br/>
                <div id="update-ratings-poster-msg" style="display: none; opacity: 0.7"></div>
                <br/>
                <button type="button" class="pure-button open-add-badges-button" onclick="openAddBadges()">Add Badges / Label</button>
                <br/>
                <div id="update-ratings-poster-msg" style="display: none; opacity: 0.7"></div>
                <br/>
                <button type="button" class="pure-button" onclick="backToSearch()">Back</button>
                &nbsp;&nbsp;&nbsp;
                <button type="button" class="pure-button" onclick="closeFolderPosterEdit()">Close</button>
            </div>
        </div>
        <div id="custom-poster" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Custom Poster</h1>
            <div id="custom-poster-allowed" style="text-align: center">
                <form class="pure-form">
                    <input type="text" id="custom-poster-input" placeholder="Image URL" />
                </form>
                <button type="button" class="pure-button pure-button-primary" onclick="loadCustomPoster()">Load Poster Image</button>
                &nbsp;&nbsp;&nbsp;
                <button type="button" class="pure-button" onclick="closeCustomPoster()">Close</button>
                <br/><br/><br/>
            </div>
            <div id="custom-poster-disallowed" style="display: none; text-align: center">
                Tier 3 (or higher) is required to set custom posters.
                <br/><br/>
                <button type="button" class="pure-button" onclick="closeCustomPoster()">Close</button>
            </div>
            <br/><br/><br/>
        </div>
        <div id="choose-poster" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Choose Poster</h1>
            <div id="poster-lang-allowed" style="text-align: center">
                <form class="pure-form">
                    <label for="choose-poster-lang">Poster Language&nbsp;</label>
                    <select id="choose-poster-lang">
                    </select>
                </form>
                <button type="button" class="pure-button pure-button-primary" onclick="loadPostersForLang()">Load Posters</button>
                &nbsp;&nbsp;&nbsp;
                <button type="button" class="pure-button" onclick="closeChoosePoster()">Close</button>
                <br/><br/>
                <div id="poster-choices">
                </div>
            </div>
            <div id="poster-lang-disallowed" style="display: none; text-align: center">
                Tier 2 (or higher) is required to choose alternative posters.
                <br/><br/>
                <button type="button" class="pure-button" onclick="closeChoosePoster()">Close</button>
            </div>
            <br/><br/><br/>
        </div>
        <div id="fix-media-match" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Fix Media Match</h1>
            <div style="text-align: center">
                <button type="button" class="pure-button" onclick="closeFixMediaFolder()">Close</button>
                <br/><br/><br/><br/>
                <form class="pure-form pure-form-aligned" id="fix-match-form" onsubmit="return addFixMatch()">
                    <input type="text" id="imdb-url" placeholder="IMDB URL or IMDB ID" />
                </form>
                <br/>
                <button type="button" class="pure-button pure-button-primary" onclick="addFixMatch()">Add Match</button>
                <br/><br/><br/>
                <div class="fix-error-message" style="display: none; color: red"></div>
                <br/><br/>
            </div>
        </div>
        <div id="choose-folder-by-imdb" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Choose Folder by IMDB ID</h1>
            <div style="text-align: center">
                <button type="button" class="pure-button" onclick="closeChooseFolderByImdb()">Close</button>
                <br/><br/><br/><br/>
                <form class="pure-form pure-form-aligned" id="choose-imdb-match-form" onsubmit="return editPosterByImdb()">
                    <input type="text" id="choose-imdb-url" placeholder="IMDB URL or IMDB ID" />
                </form>
                <br/>
                <button type="button" class="pure-button pure-button-primary" onclick="editPosterByImdb()">Edit Poster</button>
                <br/><br/><br/>
                <div class="choose-imdb-error-message" style="display: none; color: red"></div>
                <br/><br/>
            </div>
        </div>
        <div id="choose-folder-types" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">How would you like to select the folder to edit?</h1>
            <div style="text-align: center">
                <br/>
                <button type="button" class="pure-button pure-button-primary" onclick="openSearchFolderEdit()">Search for Folder Name</button>
                <br/><br/><br/>
                <button type="button" class="pure-button pure-button-primary" onclick="openChooseFolderByImdb()">By IMDB URL or ID</button>
                <br/><br/><br/>
                <button type="button" class="pure-button" onclick="closeChooseFolderTypes()">Close</button>
                <br/><br/><br/>
            </div>
        </div>
        <div id="choose-password" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Choose Server Password</h1>
            <div style="text-align: center">
                <div style="display: inline-block; opacity: 0.85; width: 570px; max-width: 80%; line-height: 26px">
                    The server does not have a password by default, it is although advised to secure your server if it is available outside of your network.
                </div>
                <br/><br/><br/>
                <form class="pure-form pure-form-aligned" id="choose-pass-form" onsubmit="return save_new_pass()">
                    <fieldset>
                        <div class="pure-control-group">
                            <input type="password" id="choose-pass-1" placeholder="Password" />
                        </div>
                        <br/>
                        <div class="pure-control-group">
                            <input type="password" id="choose-pass-2" placeholder="Retype Password" />
                        </div>
                        <br/>
                        <button type="submit" class="pure-button pure-button-primary">Save Password</button>&nbsp;&nbsp;&nbsp;<button type="button" class="pure-button" onclick="closeChoosePassword()">Close</button>
                        <br/><br/>
                        <div id="pass-no-match" style="display: none; opacity: 0.7">Passwords do not match.</div>
                    </fieldset>
                </form>
            </div>
        </div>
        <div id="choose-badge-settings" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Choose Badge or Label</h1>
            <div style="text-align: center">
                <form class="pure-form">
                    <select id="badge-or-label">
                        <option value="badge">Badge</option>
                        <option value="label">Label</option>
                    </select>
                </form>
            </div>
            <br/>
            <div style="text-align: center; display: none" id="choose-label-view">
                <div style="display: inline-block; opacity: 0.85; width: 570px; max-width: 80%; line-height: 26px">
                    Labels are custom text that can be added to the top of a poster.
                </div>
                <form class="pure-form">
                    <br/>
                    <input type="text" id="label-text" placeholder="Label Text" />
                    <br/><br/>
                </form>
            </div>
            <div style="text-align: center; display: none" id="choose-badge-view">
                <div style="display: inline-block; opacity: 0.85; width: 570px; max-width: 80%; line-height: 26px">
                    Up to 4 badges can be displayed on one poster.
                </div>
                <br/><br/><br/>
                <form class="pure-form badge-form">
                    <b>Badge Position</b><br/><br/>
                    <select id="badge-position">
                        <option value="left">Top Left</option>
                        <option value="center">Top Center</option>
                        <option value="right">Top Right</option>
                    </select>
                    <br/><br/><br/>
                    <b>Video Quality</b><br/><br/>
                    <i style="opacity: 0.7">4K, 1080p, 720p, etc</i>
                    <br/><br/>
                    <select id="video-quality-badges">
                        <option value="none">None</option>
                        <option value="4k">4K (Ultra HD)</option>
                        <option value="4kupscaled">4K (Upscaled)</option>
                        <option value="1080p">1080p (Full HD)</option>
                        <option value="720p">720p (HD)</option>
                        <option value="2k">2K (Quad HD)</option>
                        <option value="5k">5K (Ultra HD)</option>
                        <option value="8k">8K (Ultra HD)</option>
                        <option value="480p">480p (SD)</option>
                        <option value="360p">360p (SD)</option>
                        <option value="240p">240p (SD)</option>
                    </select>
                    <br/><br/><br/>
                    <b>3D Video Badge</b><br/><br/>
                    <select id="3d-badges">
                        <option value="none">None</option>
                        <option value="3d">3D (Stereoscopic)</option>
                    </select>
                    <br/><br/><br/>
                    <b>Color Range</b><br/><br/>
                    <i style="opacity: 0.7">HDR, Dolby Vision, etc</i>
                    <br/><br/>
                    <select id="hdr-badges">
                        <option value="none">None</option>
                        <option value="hdrcolor">HDR (True Color) [colorful]</option>
                        <option value="hdr">HDR (True Color) [silver]</option>
                        <option value="dolbyvision">Dolby Vision</option>
                    </select>
                    <br/><br/><br/>
                    <b>Video Source</b><br/><br/>
                    <i style="opacity: 0.7">Remux, BluRay, DVD, Web, etc</i>
                    <br/><br/>
                    <select id="remux-badges">
                        <option value="none">None</option>
                        <option value="remuxgold">REMUX (Lossless) [gold]</option>
                        <option value="remux">REMUX (Lossless) [silver]</option>
                        <option value="bluray">BluRay (Format)</option>
                        <option value="dvd">DVD (Format)</option>
                        <option value="web">Web (Format)</option>
                    </select>
                    <br/><br/><br/>
                    <b>Video Codec</b><br/><br/>
                    <i style="opacity: 0.7">h264, h265, etc</i>
                    <br/><br/>
                    <select id="codec-badges">
                        <option value="none">None</option>
                        <option value="h264">h264 (AVC)</option>
                        <option value="h265">h265 (HEVC)</option>
                    </select>
                    <br/><br/><br/>
                    <b>Video Container</b><br/><br/>
                    <i style="opacity: 0.7">mkv, mp4, avi, etc</i>
                    <br/><br/>
                    <select id="container-badges">
                        <option value="none">None</option>
                        <option value="mkv">MKV (Matroska)</option>
                        <option value="mp4">MP4 (MPEG-4)</option>
                        <option value="avi">AVI (A/V Interleave)</option>
                    </select>
                    <br/><br/><br/>
                    <b>Audio</b><br/><br/>
                    <select id="audio-types">
                        <option value="none-audio">None</option>
                        <option value="standard-audio">Standard</option>
                        <option value="dd-audio">Dolby Digital</option>
                        <option value="ddp-audio">Dolby Digital Plus</option>
                        <option value="truehd-audio">Dolby TrueHD</option>
                        <option value="lpcm-audio">Linear PCM</option>
                        <option value="atmos-audio">Atmos</option>
                    </select>
                    <div id="standard-audio" style="display: none">
                        <br/>
                        <select id="standard-audio-badges">
                            <option value="none">None</option>
                            <option value="audio20">2.0 (Stereo)</option>
                            <option value="audio51">5.1 (Surround)</option>
                            <option value="audio71">7.1 (Surround)</option>
                        </select>
                    </div>
                    <div id="dd-audio" style="display: none">
                        <br/>
                        <select id="dd-audio-badges">
                            <option value="none">None</option>
                            <option value="dd20">DD2.0 (Stereo)</option>
                            <option value="dd51">DD5.1 (Surround)</option>
                        </select>
                    </div>
                    <div id="ddp-audio" style="display: none">
                        <br/>
                        <select id="ddp-audio-badges">
                            <option value="none">None</option>
                            <option value="ddp20">DDP2.0 (Stereo)</option>
                            <option value="ddp51">DDP5.1 (Surround)</option>
                        </select>
                    </div>
                    <div id="truehd-audio" style="display: none">
                        <br/>
                        <select id="truehd-audio-badges">
                            <option value="none">None</option>
                            <option value="truehd51lossless">TrueHD5.1 (Lossless)</option>
                            <option value="truehd51surround">TrueHD5.1 (Surround)</option>
                            <option value="truehd71lossless">TrueHD7.1 (Lossless)</option>
                            <option value="truehd71surround">TrueHD7.1 (Surround)</option>
                        </select>
                    </div>
                    <div id="lpcm-audio" style="display: none">
                        <br/>
                        <select id="lpcm-audio-badges">
                            <option value="none">None</option>
                            <option value="pcm51lossless">PCM5.1 (Lossless)</option>
                            <option value="pcm51surround">PCM5.1 (Surround)</option>
                            <option value="pcm71lossless">PCM7.1 (Lossless)</option>
                            <option value="pcm71surround">PCM7.1 (Surround)</option>
                        </select>
                    </div>
                    <div id="atmos-audio" style="display: none">
                        <br/>
                        <select id="atmos-audio-badges">
                            <option value="none">None</option>
                            <option value="atmos3dsound">Atmos (3D Sound)</option>
                            <option value="atmossurround">Atmos (Surround)</option>
                        </select>
                    </div>
                    <br/><br/><br/>
                    <b>Personal Rating</b><br/><br/>
                    <select id="pr-types">
                        <option value="none">None</option>
                        <option value="5stars">5 Stars (Perfect)</option>
                        <option value="4stars">4 Stars (Great)</option>
                        <option value="3stars">3 Stars (Good)</option>
                        <option value="2stars">2 Stars (Bad)</option>
                        <option value="1stars">1 Star (Horrible)</option>
                    </select>
                </form>
                <br/><br/><br/>
            </div>
            <div style="text-align: center">
                <button type="button" class="pure-button" onclick="openPreviewPoster()">Preview Poster</button>
                &nbsp;&nbsp;&nbsp;
                <button type="button" class="pure-button" onclick="cancelAddBadges()">Cancel</button>
                &nbsp;&nbsp;&nbsp;
                <button type="button" class="pure-button pure-button-primary" onclick="saveAddBadges()">Save &amp; Close</button>
                <br/><br/><br/><br/><br/>
            </div>
        </div>
        <div id="preview-poster" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Preview Poster</h1>
            <div style="text-align: center">
                <img id="preview-poster-img" src="">
                <br/><br/><br/>
                <button type="button" class="pure-button" onclick="closePreviewPoster()">Back</button>
            </div>
        </div>
        <div id="create-poster" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Create Poster</h1>
            <div style="text-align: center">
                <div style="display: inline-block; opacity: 0.85; width: 570px; max-width: 80%; line-height: 26px">
                    Here you can create a custom poster with user defined ratings. After creating the poster you can either save it locally for the designated folder or submit it to RPDB so others can download it too.
                    <br/><br/>
                    <b>All fields are optional.</b> If a Image URL is not chosen, the poster will be extracted based on IMDB or TMDB URL.
                    <br/><br/>
                    <b id="create-poster-folder-name"></b>
                </div>
                <form class="pure-form">
                    <br/>
                    <input type="text" id="create-poster-img-url" placeholder="Image URL" />
                    <br/><br/>
                    <input type="text" id="create-poster-tmdb-url" placeholder="TMDB URL" />
                    <br/><br/>
                    <input type="text" id="create-poster-imdb-url" placeholder="IMDB URL" />
                    <br/><br/>
                    <input type="text" id="create-poster-mc-url" placeholder="Metacritic URL" />
                    <br/><br/>
                    <input type="text" id="create-poster-rt-url" placeholder="Rotten Tomatoes URL" />
                    <br/><br/>
                    <b>Poster Type</b><br/><br/>
                    <select id="create-poster-type">
                        <option value="poster-default">With Ratings (Default)</option>
                        <option value="poster-certs">With Ratings + Certifications</option>
                        <option value="poster-rt">With Rotten Tomatoes + Audience Ratings</option>
                        <option value="poster-mc">With Metacritic + Audience Ratings</option>
                    </select>
                    <div id="create-poster-default">
                        <br/>
                        <b>IMDB Rating (from 1.0 to 10.0)</b><br/><br/>
                        <input type="text" id="create-poster-default-imdb" placeholder="IMDB Rating" />
                        <br/><br/>
                        <b>Metacritic (from 1 to 100)</b><br/><br/>
                        <input type="text" id="create-poster-default-mc" placeholder="Metacritic Rating" />
                        <br/><br/>
                        <b>Rotten Tomatoes (from 1 to 100)</b><br/><br/>
                        <input type="text" id="create-poster-default-rt" placeholder="Rotten Tomatoes Rating" />
                        <br/><br/>
                    </div>
                    <div id="create-poster-certs" style="display: none">
                        <br/>
                        <b>IMDB Rating (from 1.0 to 10.0)</b><br/><br/>
                        <input type="text" id="create-poster-certs-imdb" placeholder="IMDB Rating" />
                        <br/><br/>
                        <b>Metacritic (from 1 to 100)</b><br/><br/>
                        <input type="text" id="create-poster-certs-mc" placeholder="Metacritic Rating" />
                        <br/><br/>
                        <b>Metacritic Certification</b><br/><br/>
                        <select id="create-poster-certs-mc-cert">
                            <option value="none">None</option>
                            <option value="must-see">Must See</option>
                        </select>
                        <br/><br/>
                        <b>Rotten Tomatoes (from 1 to 100)</b><br/><br/>
                        <input type="text" id="create-poster-certs-rt" placeholder="Rotten Tomatoes Rating" />
                        <br/><br/>
                        <b>Rotten Tomatoes Certification</b><br/><br/>
                        <select id="create-poster-certs-rt-cert">
                            <option value="none">None</option>
                            <option value="certified-fresh">Certified Fresh</option>
                            <option value="spoiled">Spoiled</option>
                        </select>
                        <br/><br/>
                    </div>
                    <div id="create-poster-rt" style="display: none">
                        <br/>
                        <b>IMDB Rating (from 1.0 to 10.0)</b><br/><br/>
                        <input type="text" id="create-poster-rt-imdb" placeholder="IMDB Rating" />
                        <br/><br/>
                        <b>Rotten Tomatoes (from 1 to 100)</b><br/><br/>
                        <input type="text" id="create-poster-rt-rt" placeholder="Rotten Tomatoes Rating" />
                        <br/><br/>
                        <b>Rotten Tomatoes Certification</b><br/><br/>
                        <select id="create-poster-rt-rt-cert">
                            <option value="none">None</option>
                            <option value="certified-fresh">Certified Fresh</option>
                            <option value="spoiled">Spoiled</option>
                        </select>
                        <br/><br/>
                        <b>Rotten Tomatoes Audience (from 1 to 100)</b><br/><br/>
                        <input type="text" id="create-poster-rt-rtaudience" placeholder="Rotten Tomatoes Audience Rating" />
                        <br/><br/>
                        <b>Rotten Tomatoes Audience Certification</b><br/><br/>
                        <select id="create-poster-rt-rtaudience-cert">
                            <option value="none">None</option>
                            <option value="spilled">Spilled</option>
                        </select>
                        <br/><br/>
                    </div>
                    <div id="create-poster-mc" style="display: none">
                        <br/>
                        <b>IMDB Rating (from 1.0 to 10.0)</b><br/><br/>
                        <input type="text" id="create-poster-mc-imdb" placeholder="IMDB Rating" />
                        <br/><br/>
                        <b>Metacritic (from 1 to 100)</b><br/><br/>
                        <input type="text" id="create-poster-mc-mc" placeholder="Metacritic Rating" />
                        <br/><br/>
                        <b>Metacritic Certification</b><br/><br/>
                        <select id="create-poster-mc-mc-cert">
                            <option value="none">None</option>
                            <option value="must-see">Must See</option>
                        </select>
                        <br/><br/>
                        <b>Metacritic Audience (from 1.0 to 10.0)</b><br/><br/>
                        <input type="text" id="create-poster-mc-mcaudience" placeholder="Metacritic Audience Rating" />
                        <br/><br/>
                    </div>
                </form>
                <div style="text-align: center">
                    <button type="button" class="pure-button" onclick="openPreviewCreatePoster()">Preview Poster</button>
                    &nbsp;&nbsp;&nbsp;
                    <button type="button" class="pure-button" onclick="cancelCreatePoster()">Cancel</button>
                    &nbsp;&nbsp;&nbsp;
                    <button type="button" class="pure-button" onclick="submitCreatePoster()">Submit</button>
                    &nbsp;&nbsp;&nbsp;
                    <button type="button" class="pure-button pure-button-primary" onclick="saveCreatePoster()">Save &amp; Close</button>
                    <br/><br/><div id="submit-poster-success"><b>Thank you for submitting your poster to RPDB!</b></div><br/><br/><br/>
                </div>
            </div>
        </div>
        <div id="preview-create-poster" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Preview Poster</h1>
            <div style="text-align: center">
                <img id="preview-create-poster-img" src="" onerror="if (this.src && !this.src.endsWith('/')) { this.src='/missing-poster.png' }">
                <br/><br/><br/>
                <button type="button" class="pure-button" onclick="closePreviewCreatePoster()">Back</button>
            </div>
        </div>
        <div id="poster-settings" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Poster Settings</h1>
            <div style="text-align: center">
                <div id="note-tier-0" style="display: none">
                    <i style="opacity: 0.7">Tier 0 API keys can only use the default poster type.</i>
                    <br/><br/><br/>
                </div>
                <div id="note-tier-1" style="display: none">
                    <i style="opacity: 0.7">Tier 1 API keys can only use the default poster type.</i>
                    <br/><br/><br/>
                </div>
                <form class="pure-form pure-form-aligned" id="poster-type-opts-form">
                    <b>Movie Posters</b>
                    <br/><br/><br/>
                    <span>Preferred Poster Language<span class="posterLangTier" style="display: none"> (Tier 2+ only)</span></span>
                    <br/><br/>
                    <div style="text-align: center">
                        <select id="movie-poster-lang">
                            <option value="en">
                                English (en)
                            </option><option value="ab">
                                Abkhazian (ab)
                            </option><option value="aa">
                                Afar (aa)
                            </option><option value="af">
                                Afrikaans (af)
                            </option><option value="ak">
                                Akan (ak)
                            </option><option value="sq">
                                Albanian (sq)
                            </option><option value="am">
                                Amharic (am)
                            </option><option value="ar">
                                Arabic (ar)
                            </option><option value="an">
                                Aragonese (an)
                            </option><option value="hy">
                                Armenian (hy)
                            </option><option value="as">
                                Assamese (as)
                            </option><option value="av">
                                Avaric (av)
                            </option><option value="ae">
                                Avestan (ae)
                            </option><option value="ay">
                                Aymara (ay)
                            </option><option value="az">
                                Azerbaijani (az)
                            </option><option value="bm">
                                Bambara (bm)
                            </option><option value="ba">
                                Bashkir (ba)
                            </option><option value="eu">
                                Basque (eu)
                            </option><option value="be">
                                Belarusian (be)
                            </option><option value="bn">
                                Bengali (bn)
                            </option><option value="bi">
                                Bislama (bi)
                            </option><option value="nb">
                                Bokmål, Norwegian; Norwegian Bokmål (nb)
                            </option><option value="bs">
                                Bosnian (bs)
                            </option><option value="br">
                                Breton (br)
                            </option><option value="bg">
                                Bulgarian (bg)
                            </option><option value="my">
                                Burmese (my)
                            </option><option value="cn">
                                Cantonese (cn)
                            </option><option value="ca">
                                Catalan; Valencian (ca)
                            </option><option value="km">
                                Central Khmer (km)
                            </option><option value="ch">
                                Chamorro (ch)
                            </option><option value="ce">
                                Chechen (ce)
                            </option><option value="ny">
                                Chichewa; Chewa; Nyanja (ny)
                            </option><option value="zh">
                                Chinese (zh)
                            </option><option value="cv">
                                Chuvash (cv)
                            </option><option value="kw">
                                Cornish (kw)
                            </option><option value="co">
                                Corsican (co)
                            </option><option value="cr">
                                Cree (cr)
                            </option><option value="hr">
                                Croatian (hr)
                            </option><option value="cs">
                                Czech (cs)
                            </option><option value="da">
                                Danish (da)
                            </option><option value="dv">
                                Divehi; Dhivehi; Maldivian (dv)
                            </option><option value="nl">
                                Dutch; Flemish (nl)
                            </option><option value="dz">
                                Dzongkha (dz)
                            </option><option value="eo">
                                Esperanto (eo)
                            </option><option value="et">
                                Estonian (et)
                            </option><option value="ee">
                                Ewe (ee)
                            </option><option value="fo">
                                Faroese (fo)
                            </option><option value="fj">
                                Fijian (fj)
                            </option><option value="fi">
                                Finnish (fi)
                            </option><option value="fr">
                                French (fr)
                            </option><option value="ff">
                                Fulah (ff)
                            </option><option value="gd">
                                Gaelic; Scottish Gaelic (gd)
                            </option><option value="gl">
                                Galician (gl)
                            </option><option value="lg">
                                Ganda (lg)
                            </option><option value="ka">
                                Georgian (ka)
                            </option><option value="de">
                                German (de)
                            </option><option value="el">
                                Greek (el)
                            </option><option value="gn">
                                Guarani (gn)
                            </option><option value="gu">
                                Gujarati (gu)
                            </option><option value="ht">
                                Haitian; Haitian Creole (ht)
                            </option><option value="ha">
                                Hausa (ha)
                            </option><option value="he">
                                Hebrew (he)
                            </option><option value="hz">
                                Herero (hz)
                            </option><option value="hi">
                                Hindi (hi)
                            </option><option value="ho">
                                Hiri Motu (ho)
                            </option><option value="hu">
                                Hungarian (hu)
                            </option><option value="is">
                                Icelandic (is)
                            </option><option value="io">
                                Ido (io)
                            </option><option value="ig">
                                Igbo (ig)
                            </option><option value="id">
                                Indonesian (id)
                            </option><option value="ia">
                                Interlingua (ia)
                            </option><option value="ie">
                                Interlingue; Occidental (ie)
                            </option><option value="iu">
                                Inuktitut (iu)
                            </option><option value="ik">
                                Inupiaq (ik)
                            </option><option value="ga">
                                Irish (ga)
                            </option><option value="it">
                                Italian (it)
                            </option><option value="ja">
                                Japanese (ja)
                            </option><option value="jv">
                                Javanese (jv)
                            </option><option value="kl">
                                Kalaallisut; Greenlandic (kl)
                            </option><option value="kn">
                                Kannada (kn)
                            </option><option value="kr">
                                Kanuri (kr)
                            </option><option value="ks">
                                Kashmiri (ks)
                            </option><option value="kk">
                                Kazakh (kk)
                            </option><option value="ki">
                                Kikuyu; Gikuyu (ki)
                            </option><option value="rw">
                                Kinyarwanda (rw)
                            </option><option value="ky">
                                Kirghiz; Kyrgyz (ky)
                            </option><option value="kv">
                                Komi (kv)
                            </option><option value="kg">
                                Kongo (kg)
                            </option><option value="ko">
                                Korean (ko)
                            </option><option value="kj">
                                Kuanyama; Kwanyama (kj)
                            </option><option value="ku">
                                Kurdish (ku)
                            </option><option value="lo">
                                Lao (lo)
                            </option><option value="la">
                                Latin (la)
                            </option><option value="lv">
                                Latvian (lv)
                            </option><option value="li">
                                Limburgan; Limburger; Limburgish (li)
                            </option><option value="ln">
                                Lingala (ln)
                            </option><option value="lt">
                                Lithuanian (lt)
                            </option><option value="lu">
                                Luba-Katanga (lu)
                            </option><option value="lb">
                                Luxembourgish; Letzeburgesch (lb)
                            </option><option value="mk">
                                Macedonian (mk)
                            </option><option value="mg">
                                Malagasy (mg)
                            </option><option value="ms">
                                Malay (ms)
                            </option><option value="ml">
                                Malayalam (ml)
                            </option><option value="mt">
                                Maltese (mt)
                            </option><option value="gv">
                                Manx (gv)
                            </option><option value="mi">
                                Maori (mi)
                            </option><option value="mr">
                                Marathi (mr)
                            </option><option value="mh">
                                Marshallese (mh)
                            </option><option value="mo">
                                Moldavian; Moldovan (mo)
                            </option><option value="mn">
                                Mongolian (mn)
                            </option><option value="na">
                                Nauru (na)
                            </option><option value="nv">
                                Navajo; Navaho (nv)
                            </option><option value="nd">
                                Ndebele, North; North Ndebele (nd)
                            </option><option value="nr">
                                Ndebele, South; South Ndebele (nr)
                            </option><option value="ng">
                                Ndonga (ng)
                            </option><option value="ne">
                                Nepali (ne)
                            </option><option value="se">
                                Northern Sami (se)
                            </option><option value="no">
                                Norwegian (no)
                            </option><option value="nn">
                                Norwegian Nynorsk; Nynorsk, Norwegian (nn)
                            </option><option value="oc">
                                Occitan (post 1500) (oc)
                            </option><option value="nj">
                                Ojibwa (oj)
                            </option><option value="or">
                                Oriya (or)
                            </option><option value="om">
                                Oromo (om)
                            </option><option value="os">
                                Ossetian; Ossetic (os)
                            </option><option value="pi">
                                Pali (pi)
                            </option><option value="pa">
                                Panjabi; Punjabi (pa)
                            </option><option value="fa">
                                Persian (fa)
                            </option><option value="pl">
                                Polish (pl)
                            </option><option value="pt">
                                Portuguese (pt)
                            </option><option value="ps">
                                Pushto; Pashto (ps)
                            </option><option value="qu">
                                Quechua (qu)
                            </option><option value="ro">
                                Romanian (ro)
                            </option><option value="rm">
                                Romansh (rm)
                            </option><option value="rn">
                                Rundi (rn)
                            </option><option value="ru">
                                Russian (ru)
                            </option><option value="sm">
                                Samoan (sm)
                            </option><option value="sg">
                                Sango (sg)
                            </option><option value="sa">
                                Sanskrit (sa)
                            </option><option value="sc">
                                Sardinian (sc)
                            </option><option value="sr">
                                Serbian (sr)
                            </option><option value="sh">
                                Serbo-Croatian (sh)
                            </option><option value="sn">
                                Shona (sn)
                            </option><option value="ii">
                                Sichuan Yi; Nuosu (ii)
                            </option><option value="sd">
                                Sindhi (sd)
                            </option><option value="si">
                                Sinhala; Sinhalese (si)
                            </option><option value="sk">
                                Slovak (sk)
                            </option><option value="sl">
                                Slovenian (sl)
                            </option><option value="so">
                                Somali (so)
                            </option><option value="st">
                                Sotho, Southern (st)
                            </option><option value="es">
                                Spanish; Castilian (es)
                            </option><option value="su">
                                Sundanese (su)
                            </option><option value="sw">
                                Swahili (sw)
                            </option><option value="ss">
                                Swati (ss)
                            </option><option value="sv">
                                Swedish (sv)
                            </option><option value="tl">
                                Tagalog (tl)
                            </option><option value="ty">
                                Tahitian (ty)
                            </option><option value="tg">
                                Tajik (tg)
                            </option><option value="ta">
                                Tamil (ta)
                            </option><option value="tt">
                                Tatar (tt)
                            </option><option value="te">
                                Telugu (te)
                            </option><option value="th">
                                Thai (th)
                            </option><option value="bo">
                                Tibetan (bo)
                            </option><option value="ti">
                                Tigrinya (ti)
                            </option><option value="to">
                                Tonga (Tonga Islands) (to)
                            </option><option value="ts">
                                Tsonga (ts)
                            </option><option value="tn">
                                Tswana (tn)
                            </option><option value="tr">
                                Turkish (tr)
                            </option><option value="tk">
                                Turkmen (tk)
                            </option><option value="tw">
                                Twi (tw)
                            </option><option value="ug">
                                Uighur; Uyghur (ug)
                            </option><option value="uk">
                                Ukrainian (uk)
                            </option><option value="uk">
                                Urdu (ur)
                            </option><option value="uz">
                                Uzbek (uz)
                            </option><option value="ve">
                                Venda (ve)
                            </option><option value="vi">
                                Vietnamese (vi)
                            </option><option value="vo">
                                Volapük (vo)
                            </option><option value="wa">
                                Walloon (wa)
                            </option><option value="cy">
                                Welsh (cy)
                            </option><option value="fy">
                                Western Frisian (fy)
                            </option><option value="wo">
                                Wolof (wo)
                            </option><option value="xh">
                                Xhosa (xh)
                            </option><option value="yi">
                                Yiddish (yi)
                            </option><option value="yo">
                                Yoruba (yo)
                            </option><option value="za">
                                Zhuang; Chuang (za)
                            </option><option value="zu">
                                Zulu (zu)
                            </option>
                        </select>
                    </div>
                    <br/><br/>
                    <label for="movie-textless-option-one" class="pure-checkbox" style="display: inline-block">
                        <input type="checkbox" id="movie-textless-option-one" class="movieOptionsCheckboxTextless" value="textless" /> Prefer Textless Posters</label>
                    <br/><br/><br/>
                    <label for="movie-checkbox-radio-option-one" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="movie-checkbox-radio-option-one" name="movieOptionsRadios" value="poster-default" checked="" /> With Ratings (default)</label>
                    &nbsp;&nbsp;
                    <label for="movie-checkbox-radio-option-two" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="movie-checkbox-radio-option-two" name="movieOptionsRadios" value="poster-certs" /> With Ratings + Certifications</label>
                    <br/><br/>
                    <label for="movie-checkbox-radio-option-three" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="movie-checkbox-radio-option-three" name="movieOptionsRadios" value="poster-rt" /> With Rotten Tomatoes + Audience Ratings</label>
                    &nbsp;&nbsp;
                    <label for="movie-checkbox-radio-option-four" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="movie-checkbox-radio-option-four" name="movieOptionsRadios" value="poster-mc" /> With Metacritic + Audience Ratings</label>
                    <br/><br/><br/><br/>
                    <b>Series Posters</b>
                    <br/><br/><br/>
                    <span>Preferred Poster Language<span class="posterLangTier" style="display: none"> (Tier 2+ only)</span></span>
                    <br/><br/>
                    <div style="text-align: center">
                        <select id="series-poster-lang">
                            <option value="en">
                                English (en)
                            </option><option value="ab">
                                Abkhazian (ab)
                            </option><option value="aa">
                                Afar (aa)
                            </option><option value="af">
                                Afrikaans (af)
                            </option><option value="ak">
                                Akan (ak)
                            </option><option value="sq">
                                Albanian (sq)
                            </option><option value="am">
                                Amharic (am)
                            </option><option value="ar">
                                Arabic (ar)
                            </option><option value="an">
                                Aragonese (an)
                            </option><option value="hy">
                                Armenian (hy)
                            </option><option value="as">
                                Assamese (as)
                            </option><option value="av">
                                Avaric (av)
                            </option><option value="ae">
                                Avestan (ae)
                            </option><option value="ay">
                                Aymara (ay)
                            </option><option value="az">
                                Azerbaijani (az)
                            </option><option value="bm">
                                Bambara (bm)
                            </option><option value="ba">
                                Bashkir (ba)
                            </option><option value="eu">
                                Basque (eu)
                            </option><option value="be">
                                Belarusian (be)
                            </option><option value="bn">
                                Bengali (bn)
                            </option><option value="bi">
                                Bislama (bi)
                            </option><option value="nb">
                                Bokmål, Norwegian; Norwegian Bokmål (nb)
                            </option><option value="bs">
                                Bosnian (bs)
                            </option><option value="br">
                                Breton (br)
                            </option><option value="bg">
                                Bulgarian (bg)
                            </option><option value="my">
                                Burmese (my)
                            </option><option value="cn">
                                Cantonese (cn)
                            </option><option value="ca">
                                Catalan; Valencian (ca)
                            </option><option value="km">
                                Central Khmer (km)
                            </option><option value="ch">
                                Chamorro (ch)
                            </option><option value="ce">
                                Chechen (ce)
                            </option><option value="ny">
                                Chichewa; Chewa; Nyanja (ny)
                            </option><option value="zh">
                                Chinese (zh)
                            </option><option value="cv">
                                Chuvash (cv)
                            </option><option value="kw">
                                Cornish (kw)
                            </option><option value="co">
                                Corsican (co)
                            </option><option value="cr">
                                Cree (cr)
                            </option><option value="hr">
                                Croatian (hr)
                            </option><option value="cs">
                                Czech (cs)
                            </option><option value="da">
                                Danish (da)
                            </option><option value="dv">
                                Divehi; Dhivehi; Maldivian (dv)
                            </option><option value="nl">
                                Dutch; Flemish (nl)
                            </option><option value="dz">
                                Dzongkha (dz)
                            </option><option value="eo">
                                Esperanto (eo)
                            </option><option value="et">
                                Estonian (et)
                            </option><option value="ee">
                                Ewe (ee)
                            </option><option value="fo">
                                Faroese (fo)
                            </option><option value="fj">
                                Fijian (fj)
                            </option><option value="fi">
                                Finnish (fi)
                            </option><option value="fr">
                                French (fr)
                            </option><option value="ff">
                                Fulah (ff)
                            </option><option value="gd">
                                Gaelic; Scottish Gaelic (gd)
                            </option><option value="gl">
                                Galician (gl)
                            </option><option value="lg">
                                Ganda (lg)
                            </option><option value="ka">
                                Georgian (ka)
                            </option><option value="de">
                                German (de)
                            </option><option value="el">
                                Greek (el)
                            </option><option value="gn">
                                Guarani (gn)
                            </option><option value="gu">
                                Gujarati (gu)
                            </option><option value="ht">
                                Haitian; Haitian Creole (ht)
                            </option><option value="ha">
                                Hausa (ha)
                            </option><option value="he">
                                Hebrew (he)
                            </option><option value="hz">
                                Herero (hz)
                            </option><option value="hi">
                                Hindi (hi)
                            </option><option value="ho">
                                Hiri Motu (ho)
                            </option><option value="hu">
                                Hungarian (hu)
                            </option><option value="is">
                                Icelandic (is)
                            </option><option value="io">
                                Ido (io)
                            </option><option value="ig">
                                Igbo (ig)
                            </option><option value="id">
                                Indonesian (id)
                            </option><option value="ia">
                                Interlingua (ia)
                            </option><option value="ie">
                                Interlingue; Occidental (ie)
                            </option><option value="iu">
                                Inuktitut (iu)
                            </option><option value="ik">
                                Inupiaq (ik)
                            </option><option value="ga">
                                Irish (ga)
                            </option><option value="it">
                                Italian (it)
                            </option><option value="ja">
                                Japanese (ja)
                            </option><option value="jv">
                                Javanese (jv)
                            </option><option value="kl">
                                Kalaallisut; Greenlandic (kl)
                            </option><option value="kn">
                                Kannada (kn)
                            </option><option value="kr">
                                Kanuri (kr)
                            </option><option value="ks">
                                Kashmiri (ks)
                            </option><option value="kk">
                                Kazakh (kk)
                            </option><option value="ki">
                                Kikuyu; Gikuyu (ki)
                            </option><option value="rw">
                                Kinyarwanda (rw)
                            </option><option value="ky">
                                Kirghiz; Kyrgyz (ky)
                            </option><option value="kv">
                                Komi (kv)
                            </option><option value="kg">
                                Kongo (kg)
                            </option><option value="ko">
                                Korean (ko)
                            </option><option value="kj">
                                Kuanyama; Kwanyama (kj)
                            </option><option value="ku">
                                Kurdish (ku)
                            </option><option value="lo">
                                Lao (lo)
                            </option><option value="la">
                                Latin (la)
                            </option><option value="lv">
                                Latvian (lv)
                            </option><option value="li">
                                Limburgan; Limburger; Limburgish (li)
                            </option><option value="ln">
                                Lingala (ln)
                            </option><option value="lt">
                                Lithuanian (lt)
                            </option><option value="lu">
                                Luba-Katanga (lu)
                            </option><option value="lb">
                                Luxembourgish; Letzeburgesch (lb)
                            </option><option value="mk">
                                Macedonian (mk)
                            </option><option value="mg">
                                Malagasy (mg)
                            </option><option value="ms">
                                Malay (ms)
                            </option><option value="ml">
                                Malayalam (ml)
                            </option><option value="mt">
                                Maltese (mt)
                            </option><option value="gv">
                                Manx (gv)
                            </option><option value="mi">
                                Maori (mi)
                            </option><option value="mr">
                                Marathi (mr)
                            </option><option value="mh">
                                Marshallese (mh)
                            </option><option value="mo">
                                Moldavian; Moldovan (mo)
                            </option><option value="mn">
                                Mongolian (mn)
                            </option><option value="na">
                                Nauru (na)
                            </option><option value="nv">
                                Navajo; Navaho (nv)
                            </option><option value="nd">
                                Ndebele, North; North Ndebele (nd)
                            </option><option value="nr">
                                Ndebele, South; South Ndebele (nr)
                            </option><option value="ng">
                                Ndonga (ng)
                            </option><option value="ne">
                                Nepali (ne)
                            </option><option value="se">
                                Northern Sami (se)
                            </option><option value="no">
                                Norwegian (no)
                            </option><option value="nn">
                                Norwegian Nynorsk; Nynorsk, Norwegian (nn)
                            </option><option value="oc">
                                Occitan (post 1500) (oc)
                            </option><option value="nj">
                                Ojibwa (oj)
                            </option><option value="or">
                                Oriya (or)
                            </option><option value="om">
                                Oromo (om)
                            </option><option value="os">
                                Ossetian; Ossetic (os)
                            </option><option value="pi">
                                Pali (pi)
                            </option><option value="pa">
                                Panjabi; Punjabi (pa)
                            </option><option value="fa">
                                Persian (fa)
                            </option><option value="pl">
                                Polish (pl)
                            </option><option value="pt">
                                Portuguese (pt)
                            </option><option value="ps">
                                Pushto; Pashto (ps)
                            </option><option value="qu">
                                Quechua (qu)
                            </option><option value="ro">
                                Romanian (ro)
                            </option><option value="rm">
                                Romansh (rm)
                            </option><option value="rn">
                                Rundi (rn)
                            </option><option value="ru">
                                Russian (ru)
                            </option><option value="sm">
                                Samoan (sm)
                            </option><option value="sg">
                                Sango (sg)
                            </option><option value="sa">
                                Sanskrit (sa)
                            </option><option value="sc">
                                Sardinian (sc)
                            </option><option value="sr">
                                Serbian (sr)
                            </option><option value="sh">
                                Serbo-Croatian (sh)
                            </option><option value="sn">
                                Shona (sn)
                            </option><option value="ii">
                                Sichuan Yi; Nuosu (ii)
                            </option><option value="sd">
                                Sindhi (sd)
                            </option><option value="si">
                                Sinhala; Sinhalese (si)
                            </option><option value="sk">
                                Slovak (sk)
                            </option><option value="sl">
                                Slovenian (sl)
                            </option><option value="so">
                                Somali (so)
                            </option><option value="st">
                                Sotho, Southern (st)
                            </option><option value="es">
                                Spanish; Castilian (es)
                            </option><option value="su">
                                Sundanese (su)
                            </option><option value="sw">
                                Swahili (sw)
                            </option><option value="ss">
                                Swati (ss)
                            </option><option value="sv">
                                Swedish (sv)
                            </option><option value="tl">
                                Tagalog (tl)
                            </option><option value="ty">
                                Tahitian (ty)
                            </option><option value="tg">
                                Tajik (tg)
                            </option><option value="ta">
                                Tamil (ta)
                            </option><option value="tt">
                                Tatar (tt)
                            </option><option value="te">
                                Telugu (te)
                            </option><option value="th">
                                Thai (th)
                            </option><option value="bo">
                                Tibetan (bo)
                            </option><option value="ti">
                                Tigrinya (ti)
                            </option><option value="to">
                                Tonga (Tonga Islands) (to)
                            </option><option value="ts">
                                Tsonga (ts)
                            </option><option value="tn">
                                Tswana (tn)
                            </option><option value="tr">
                                Turkish (tr)
                            </option><option value="tk">
                                Turkmen (tk)
                            </option><option value="tw">
                                Twi (tw)
                            </option><option value="ug">
                                Uighur; Uyghur (ug)
                            </option><option value="uk">
                                Ukrainian (uk)
                            </option><option value="uk">
                                Urdu (ur)
                            </option><option value="uz">
                                Uzbek (uz)
                            </option><option value="ve">
                                Venda (ve)
                            </option><option value="vi">
                                Vietnamese (vi)
                            </option><option value="vo">
                                Volapük (vo)
                            </option><option value="wa">
                                Walloon (wa)
                            </option><option value="cy">
                                Welsh (cy)
                            </option><option value="fy">
                                Western Frisian (fy)
                            </option><option value="wo">
                                Wolof (wo)
                            </option><option value="xh">
                                Xhosa (xh)
                            </option><option value="yi">
                                Yiddish (yi)
                            </option><option value="yo">
                                Yoruba (yo)
                            </option><option value="za">
                                Zhuang; Chuang (za)
                            </option><option value="zu">
                                Zulu (zu)
                            </option>
                        </select>
                    </div>
                    <br/><br/>
                    <label for="series-textless-option-one" class="pure-checkbox" style="display: inline-block">
                        <input type="checkbox" id="series-textless-option-one" class="seriesOptionsCheckboxTextless" value="textless" /> Prefer Textless Posters</label>
                    <br/><br/><br/>
                    <label for="series-checkbox-radio-option-one" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="series-checkbox-radio-option-one" name="seriesOptionsRadios" value="poster-default" checked="" /> With Ratings (default)</label>
                    &nbsp;&nbsp;
                    <label for="series-checkbox-radio-option-two" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="series-checkbox-radio-option-two" name="seriesOptionsRadios" value="poster-certs" /> With Ratings + Certifications</label>
                    <br/><br/>
                    <label for="series-checkbox-radio-option-three" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="series-checkbox-radio-option-three" name="seriesOptionsRadios" value="poster-rt" /> With Rotten Tomatoes + Audience Ratings</label>
                    &nbsp;&nbsp;
                    <label for="series-checkbox-radio-option-four" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="series-checkbox-radio-option-four" name="seriesOptionsRadios" value="poster-mc" /> With Metacritic + Audience Ratings</label>
                </form>
                <br/><br/><br/>
                <button type="button" class="pure-button pure-button-primary" onclick="closePosterSettings()">Save &amp; Close</button>
                <br/><br/><br/>
            </div>
        </div>
        <div id="scan-settings" class="full-page-dialog" style="display: none">
            <h1 class="dialog-title">Scan Settings</h1>
            <div style="text-align: center">
                <div style="display: inline-block; opacity: 0.85; width: 570px; max-width: 80%; line-height: 26px">
                    All setting descriptions should be read carefully.
                </div>
                <br/><br/><br/>
                <b>Scanner Status</b>
                <br/><br/>
                <div class="scan-status" style="padding: 10px; border: 1px solid rgba(0,0,0,0.3); display: inline-block">Idle, not scanning</div>
                <br/><br/>
                <button type="button" class="pure-button" onclick="cancelScan()">Cancel Scan</button>
                <br/><br/><br/><br/>
                <b>Manual Scan Options</b>
                <br/><br/>
                <div>
                    <i style="opacity: 0.7">Scans are done periodically by default, by runing a full scan you initiate a scan manually.</i>
                    <br/><br/>
                </div>
                <button type="button" class="pure-button" onclick="runFullScan()">Run Full Scan</button>
                <br/><br/>
                <div id="full-scan-msg" style="opacity: 0.7">Last full scan started: never</div>
                <br/><br/><br/>
                <div>
                    <i style="opacity: 0.7">Forcing an overwrite will update all posters, refresh all ratings and apply new settings.</i>
                    <br/><br/>
                    <i style="opacity: 0.7"><b>Warning:</b> Forcing an overwrite scan may deplete all available requests for this month.</i>
                    <br/><br/>
                </div>
                <button type="button" class="pure-button" onclick="forceOverwriteScan()">Force Overwrite Scan</button>
                <br/><br/><br/><br/>
                <b>Overwrite Images</b><br/><br/>
                <div>
                    <i style="opacity: 0.7">Overwriting images will keep the ratings updated, but will also use more requests.</i>
                    <br/><br/>
                </div>
                <label for="overwrite-option-one" class="pure-checkbox" style="display: inline-block">
                    <input type="checkbox" id="overwrite-option-one" class="optionsCheckbox" value="overwrite" /> Overwrite Images</label>
                <br/><br/>
                <label for="overwrite-option-two" class="pure-checkbox" style="display: inline-block">
                    <input type="checkbox" id="overwrite-option-two" class="optionsCheckbox" value="overwrite" /> Only Overwrite Items from the Last 2 Years</label>
                <br/><br/><br/><br/>
                <b>Overwrite Frequency</b><br/><br/>
                <div>
                    <i style="opacity: 0.7">Only applies if "Overwrite Images" is enabled.</i>
                    <br/><br/>
                </div>
                <form class="pure-form pure-form-aligned" id="overwrite-opts-form">
                    <label for="checkbox-radio-overwrite-one" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="checkbox-radio-overwrite-one" name="overwriteRadios" value="overwrite-monthly" checked="" /> Monthly (default)</label>
                    &nbsp;&nbsp;
                    <label for="checkbox-radio-overwrite-two" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="checkbox-radio-overwrite-two" name="overwriteRadios" value="overwrite-bimonthly" /> Bimonthly</label>
                </form>
                <br/><br/>
                <b>Scan Type</b><br/><br/>
                <div>
                    <i style="opacity: 0.7">"Polling" should be used when network folders are used.</i>
                    <br/><br/>
                    <i style="opacity: 0.7"><b>Important:</b> Changing this setting requires restarting the app.</i>
                    <br/><br/>
                </div>
                <form class="pure-form pure-form-aligned" id="scan-type-opts-form">
                    <label for="checkbox-radio-scan-type-one" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="checkbox-radio-scan-type-one" name="scanTypeRadios" value="fsevents" checked="" /> FS Events</label>
                    &nbsp;&nbsp;
                    <label for="checkbox-radio-scan-type-two" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="checkbox-radio-scan-type-two" name="scanTypeRadios" value="polling" /> Polling</label>
                </form>
                <br/><br/>
                <b>Polling Interval</b><br/><br/>
                <div>
                    <i style="opacity: 0.7">Only used when the "Polling" scan type is selected.</i>
                    <br/><br/>
                    <i style="opacity: 0.7"><b>Important:</b> Changing this setting requires restarting the app.</i>
                    <br/><br/>
                    <form class="pure-form pure-form-aligned" id="scan-interval-opts-form">
                        <label for="checkbox-radio-scan-interval-one" class="pure-radio" style="display: inline-block">
                            <input type="radio" id="checkbox-radio-scan-interval-one" name="scanIntervalRadios" value="100" checked="" /> 100ms</label>
                        &nbsp;&nbsp;
                        <label for="checkbox-radio-scan-interval-two" class="pure-radio" style="display: inline-block">
                            <input type="radio" id="checkbox-radio-scan-interval-two" name="scanIntervalRadios" value="500" /> 500ms</label>
                        &nbsp;&nbsp;
                        <label for="checkbox-radio-scan-interval-three" class="pure-radio" style="display: inline-block">
                            <input type="radio" id="checkbox-radio-scan-interval-three" name="scanIntervalRadios" value="1000" /> 1s</label>
                        &nbsp;&nbsp;
                        <label for="checkbox-radio-scan-interval-four" class="pure-radio" style="display: inline-block">
                            <input type="radio" id="checkbox-radio-scan-interval-four" name="scanIntervalRadios" value="3000" /> 3s</label>
                        &nbsp;&nbsp;
                        <label for="checkbox-radio-scan-interval-five" class="pure-radio" style="display: inline-block">
                            <input type="radio" id="checkbox-radio-scan-interval-five" name="scanIntervalRadios" value="5000" /> 5s</label>
                        <br/><br/>
                        <label for="checkbox-radio-scan-interval-six" class="pure-radio" style="display: inline-block">
                            <input type="radio" id="checkbox-radio-scan-interval-six" name="scanIntervalRadios" value="7000" /> 7s</label>
                        &nbsp;&nbsp;
                        <label for="checkbox-radio-scan-interval-seven" class="pure-radio" style="display: inline-block">
                            <input type="radio" id="checkbox-radio-scan-interval-seven" name="scanIntervalRadios" value="10000" /> 10s</label>
                        &nbsp;&nbsp;
                        <label for="checkbox-radio-scan-interval-eight" class="pure-radio" style="display: inline-block">
                            <input type="radio" id="checkbox-radio-scan-interval-eight" name="scanIntervalRadios" value="15000" /> 15s</label>
                        &nbsp;&nbsp;
                        <label for="checkbox-radio-scan-interval-nine" class="pure-radio" style="display: inline-block">
                            <input type="radio" id="checkbox-radio-scan-interval-nine" name="scanIntervalRadios" value="20000" /> 20s</label>
                    </form>
                </div>
                <br/><br/>
                <b>Matching Order</b><br/><br/>
                <div>
                    <i style="opacity: 0.7">Which internal matchers should be used and in which order.</i>
                    <br/><br/>
                </div>
                <form class="pure-form pure-form-aligned" id="scan-order-opts-form">
                    <label for="checkbox-radio-scan-order-one" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="checkbox-radio-scan-order-one" name="scanOrderRadios" value="imdb-tmdb" checked="" /> IMDB > TMDB</label>
                    &nbsp;&nbsp;
                    <label for="checkbox-radio-scan-order-two" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="checkbox-radio-scan-order-two" name="scanOrderRadios" value="tmdb-imdb" /> TMDB > IMDB</label>
                    <br/>
                    <label for="checkbox-radio-scan-order-three" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="checkbox-radio-scan-order-three" name="scanOrderRadios" value="imdb" /> IMDB Only</label>
                    &nbsp;&nbsp;
                    <label for="checkbox-radio-scan-order-four" class="pure-radio" style="display: inline-block">
                        <input type="radio" id="checkbox-radio-scan-order-four" name="scanOrderRadios" value="tmdb" /> TMDB Only</label>
                </form>
                <br/><br/>
                <b>Other Settings</b>
                <br/><br/>
                <label for="no-scan-on-start" class="pure-checkbox" style="display: inline-block">
                    <input type="checkbox" id="no-scan-on-start" class="optionsCheckbox" value="noscanonstart" /> Do not scan on app start</label>
                <br/><br/>
                <label for="no-empty-folders" class="pure-checkbox" style="display: inline-block">
                    <input type="checkbox" id="no-empty-folders" class="optionsCheckbox" value="notempty" /> Skip Folders that do not Include Video Files</label>
                <br/><br/>
                <label for="cache-matches" class="pure-checkbox" style="display: inline-block">
                    <input type="checkbox" id="cache-matches" class="optionsCheckbox" value="cachedmatch" checked="" /> Cache Previous Successful Matches</label>
                <br/><br/><br/><br/>
                <button type="button" class="pure-button pure-button-primary" onclick="closeScanSettings()">Save &amp; Close</button>
                <br/><br/><br/>
            </div>
        </div>
        <div id="tier-3-only-message" class="full-page-dialog" style="display: none">
            <div style="text-align: center">
                <br/><br/>
                This feature is only available with Tier 3 (or higher)
                <br/><br/><br/>
                <button type="button" class="pure-button" onclick="closeTier3onlyMessage()">Close</button>
            </div>
        </div>
        <script>
            var needsUpdate = false
            function checkUpdate() {
                if (needsUpdate)
                    return
                $.get('needsUpdate', function(data) {
                    if ((data || {}).needsUpdate) {
                        needsUpdate = true
                        if (data.dockerUpdate) {
                            $('#update-check').html('A new update is available, please update your <a target="_blank" href="https://hub.docker.com/r/jaruba/rpdb-folders-docker" style="color: #0078e7; text-decoration: none">docker image</a>.')
                        } else {
                            $('#update-check').html('A new update is available, <a target="_blank" href="' + data.zipBall + '" style="color: #0078e7; text-decoration: none">download it here</a>!')
                        }
                        $('#update-check').css('display', 'inline-block')
                    }
                })
                setTimeout(checkUpdate, 24 * 60 * 60 * 1000) // check daily
            }
            var searchStrings = {}
            var searchFolderName = ''
            var searchFolderType = ''
            var apiKey
            function load_api_key(skipValidation) {
                if ($('#api-key-error-1').is(':visible'))
                    $('#api-key-error-1').hide()
                if ($('#api-key-error-2').is(':visible'))
                    $('#api-key-error-2').hide()
                if (!apiKey) {
                    $('#api-key-error-1').show()
                    return
                }
                function validatedKey() {
                    var tier = 1
                    if (apiKey.startsWith('t2-'))
                        tier = 2
                    else if (apiKey.startsWith('t3-'))
                        tier = 3
                    else if (apiKey.startsWith('t4-'))
                        tier = 4
                    else if (apiKey.startsWith('t5-'))
                        tier = 5
                    else if (apiKey.startsWith('t0-')) // trial key
                        tier = 0
                    $('#top-links').hide()
                    $('#api-key-form').hide()
                    $('#api-key-success-msg').text('Successfully loaded Tier ' + tier + ' API Key!')
                    $('#api-key-success').show()
                    var shouldUpdate = false
                    if (tier == 0) {
                        $('#note-tier-0').show()
                    }
                    if (tier == 1) {
                        $('#note-tier-1').show()
                    }
                    if (tier == 1 || tier == 0) {
                        if (!$('#movie-checkbox-radio-option-one').is(':checked')) {
                            $('#movie-checkbox-radio-option-one').prop('checked', true)
                            shouldUpdate = true
                        }
                        $('#movie-checkbox-radio-option-two').prop('disabled', true)
                        $('#movie-checkbox-radio-option-three').prop('disabled', true)
                        $('#movie-checkbox-radio-option-four').prop('disabled', true)
                        if (!$('#series-checkbox-radio-option-one').is(':checked')) {
                            $('#series-checkbox-radio-option-one').prop('checked', true)
                            shouldUpdate = true
                        }
                        $('#series-checkbox-radio-option-two').prop('disabled', true)
                        $('#series-checkbox-radio-option-three').prop('disabled', true)
                        $('#series-checkbox-radio-option-four').prop('disabled', true)
                        $('#poster-lang-allowed').hide()
                        $('#poster-lang-disallowed').show()
                        $('.posterLangTier').show()
                        $('#movie-poster-lang').prop('disabled', 'disabled')
                        $('#movie-poster-lang').val($('#movie-poster-lang option:first').val())
                        $('#series-poster-lang').prop('disabled', 'disabled')
                        $('#series-poster-lang').val($('#series-poster-lang option:first').val())
                    } else {
                        $('#movie-checkbox-radio-option-two').prop('disabled', false)
                        $('#movie-checkbox-radio-option-three').prop('disabled', false)
                        $('#movie-checkbox-radio-option-four').prop('disabled', false)
                        $('#series-checkbox-radio-option-two').prop('disabled', false)
                        $('#series-checkbox-radio-option-three').prop('disabled', false)
                        $('#series-checkbox-radio-option-four').prop('disabled', false)
                        $('.posterLangTier').hide()
                        $('#movie-poster-lang').prop('disabled', false)
                        $('#series-poster-lang').prop('disabled', false)
                    }
                    if (tier == 3 || tier == 4 || tier == 5) {
                        $('#note-tier-3').hide()
                        $('#backdrops-option-one').prop('disabled', false)
                        $('.open-add-badges-button').attr('onclick', 'openAddBadges()');
                    } else {
                        if ($('#backdrops-option-one').is(':checked')) {
                            $('#backdrops-option-one').prop('checked', false)
                            shouldUpdate = true
                        }
                        $('.open-add-badges-button').attr('onclick', 'openTier3onlyMessage()');
                        $('#note-tier-3').show()
                        $('#backdrops-option-one').prop('disabled', true)
                        $('#custom-poster-allowed').hide()
                        $('#custom-poster-disallowed').show()
                    }
                    if (shouldUpdate)
                        setTimeout(() => { updateSettings() })
                    $('#opts-holder').show()
                }
                if (skipValidation) {
                    validatedKey()
                } else {
                    $.get('https://api.ratingposterdb.com/' + apiKey + '/isValid', function(data) {
                        if ((data || {}).valid) {
                            $.get('setApiKey?key=' + apiKey + '&pass=' + encodeURIComponent(servPass || ''), function(data) { })
                            validatedKey()
                        } else {
                            $('#api-key').val('')
                            $('#api-key-error-2').show()
                        }
                    }).fail(function() {
                        $('#api-key').val('')
                        $('#api-key-error-2').show()
                    });
                }
            }
            function updateSettings() {
                var moviePosterType =$('input[name=movieOptionsRadios]:checked', '#poster-type-opts-form').val();
                var seriesPosterType =$('input[name=seriesOptionsRadios]:checked', '#poster-type-opts-form').val();
                var overwritePeriod = $('input[name=overwriteRadios]:checked', '#overwrite-opts-form').val();
                var overwrite = 0;
                if ($("#overwrite-option-one").is(':checked')) {
                  overwrite = 1;
                }
                var overwrite2years = 0
                if ($("#overwrite-option-two").is(':checked')) {
                  overwrite2years = 1;
                }
                var noEmptyFolders = 0
                if ($("#no-empty-folders").is(':checked')) {
                  noEmptyFolders = 1;
                }
                var noScanOnStart = 0
                if ($("#no-scan-on-start").is(':checked')) {
                  noScanOnStart = 1;
                }
                var cacheMatches = 0
                if ($("#cache-matches").is(':checked')) {
                  cacheMatches = 1;
                }
                var backdrops = 0
                if ($("#backdrops-option-one").is(':checked')) {
                  backdrops = 1;
                }
                var movieTextless = 0
                if ($("#movie-textless-option-one").is(':checked')) {
                  movieTextless = 1;
                }
                var seriesTextless = 0
                if ($("#series-textless-option-one").is(':checked')) {
                  seriesTextless = 1;
                }
                var scanOrder = $('input[name=scanOrderRadios]:checked', '#scan-order-opts-form').val();
                var usePolling = $('input[name=scanTypeRadios]:checked', '#scan-type-opts-form').val() == 'polling' ? '1' : '0';
                var pollingInterval = $('input[name=scanIntervalRadios]:checked', '#scan-interval-opts-form').val();
                var moviePosterLang = $('#movie-poster-lang').val()
                var seriesPosterLang = $('#series-poster-lang').val()
                $.get('setSettings?moviePosterType=' + moviePosterType + '&seriesPosterType=' + seriesPosterType + '&overwrite=' + overwrite + '&backdrops=' + backdrops + '&movieTextless=' + movieTextless + '&seriesTextless=' + seriesTextless + '&overwritePeriod=' + overwritePeriod + '&overwrite2years=' + overwrite2years + '&noEmptyFolders=' + noEmptyFolders + '&noScanOnStart=' + noScanOnStart + '&scanOrder=' + scanOrder + '&usePolling=' + usePolling + '&pollingInterval=' + pollingInterval + '&cacheMatches=' + cacheMatches + '&moviePosterLang=' + moviePosterLang + '&seriesPosterLang=' + seriesPosterLang + '&pass=' + encodeURIComponent(servPass || ''), function(data) {});
            }
            var servPass = false
            function set_pass() {
                var tempPass = $('#service-pass').val()
                $.get('checkPass?pass=' + encodeURIComponent(tempPass), function(data) {
                    if ((data || {}).success) {
                        servPass = tempPass
                        $('#password-check').hide()
                        if ($('#remember-me').is(':checked')) {
                            // save pass to local storage
                            if (((window || {}).localStorage || {}).setItem) {
                                window.localStorage.setItem('rpdbLogin', servPass)
                            }
                        }
                        init()
                    } else {
                        $('#pass-error').show()
                    }
                })
                return false
            }
            function save_new_pass() {
                var tempPass1 = $('#choose-pass-1').val()
                var tempPass2 = $('#choose-pass-2').val()
                if (tempPass1 && tempPass1 == tempPass2) {
                    $.get('savePass?newpass=' + encodeURIComponent(tempPass1) + '&pass=' + encodeURIComponent(servPass || ''), function(data) {
                        if ((data || {}).success) {
                            location.reload()
                        }
                    })
                } else {
                    $('#pass-no-match').show()
                }
                return false
            }
            function set_api_key() {
                apiKey = $('#api-key').val()
                load_api_key()
                return false
            }
            var init
            $(document).ready(function() {
                init = function() {
                    checkUpdate()
                    $.get('getSettings?pass=' + encodeURIComponent(servPass || ''), function(data) {
                        if ((data || {}).success) {
                            // load saved data
                            if (data.pkgVersion) {
                                $("#rpdb-folders-version").text('RPDB Folders v' + data.pkgVersion)
                            }
                            if (data.overwrite) {
                                $("#overwrite-option-one").prop('checked', true)
                            }
                            if (data.overwrite2years) {
                                $("#overwrite-option-two").prop('checked', true)
                            }
                            if (data.noEmptyFolders) {
                                $("#no-empty-folders").prop('checked', true)
                            }
                            if (data.noScanOnStart) {
                                $("#no-scan-on-start").prop('checked', true)
                            }
                            if (!data.cacheMatches) {
                                $("#cache-matches").prop('checked', false)
                            }
                            if (data.backdrops) {
                                $("#backdrops-option-one").prop('checked', true)
                            }
                            if (data.movieTextless) {
                                $("#movie-textless-option-one").prop('checked', true)
                            }
                            if (data.seriesTextless) {
                                $("#series-textless-option-one").prop('checked', true)
                            }
                            if (data.moviePosterType) {
                                $('input[name=movieOptionsRadios]', '#poster-type-opts-form').each((ij,el)=> {
                                    if ($(el).val() == data.moviePosterType) {
                                        $(el).prop('checked', true)
                                    } else {
                                        $(el).prop('checked', false)
                                    }
                                })
                            }
                            if (data.seriesPosterType) {
                                $('input[name=seriesOptionsRadios]', '#poster-type-opts-form').each((ij,el)=> {
                                    if ($(el).val() == data.seriesPosterType) {
                                        $(el).prop('checked', true)
                                    } else {
                                        $(el).prop('checked', false)
                                    }
                                })
                            }
                            if (data.moviePosterLang) {
                                $('#movie-poster-lang').val(data.moviePosterLang)
                            }
                            if (data.seriesPosterLang) {
                                $('#series-poster-lang').val(data.seriesPosterLang)
                            }
                            if (data.minOverwritePeriod) {
                                var overwritePeriod = ''
                                if (data.minOverwritePeriod == 29 * 24 * 60 * 60 * 1000) {
                                    overwritePeriod = 'overwrite-monthly'
                                } else {
                                    overwritePeriod = 'overwrite-bimonthly'
                                }
                                $('input[name=overwriteRadios]', '#overwrite-opts-form').each((ij,el)=> {
                                    if ($(el).val() == overwritePeriod) {
                                        $(el).prop('checked', true)
                                    } else {
                                        $(el).prop('checked', false)
                                    }
                                })
                            }
                            if (data.scanOrder) {
                                $('input[name=scanOrderRadios]', '#scan-order-opts-form').each((ij,el)=> {
                                    if ($(el).val() == data.scanOrder) {
                                        $(el).prop('checked', true)
                                    } else {
                                        $(el).prop('checked', false)
                                    }
                                })
                            }
                            if (data.usePolling) {
                                $('input[name=scanTypeRadios]', '#scan-type-opts-form').each((ij,el)=> {
                                    if ($(el).val() == data.usePolling) {
                                        $(el).prop('checked', true)
                                    } else {
                                        $(el).prop('checked', false)
                                    }
                                })
                            }
                            if (data.pollingInterval) {
                                $('input[name=scanIntervalRadios]', '#scan-interval-opts-form').each((ij,el)=> {
                                    if ($(el).val() == data.pollingInterval + '') {
                                        $(el).prop('checked', true)
                                    } else {
                                        $(el).prop('checked', false)
                                    }
                                })
                            }
                            $('#history-msg').text('Added images to ' + data.historyCount + ' folders.')
                            $('#watched-folders').text('Watching ' + (data.movieFolders || []).length + ' movie folders and ' + (data.seriesFolders || []).length + ' series folders.')
                            if (data.apiKeyPrefix) {
                                apiKey = data.apiKeyPrefix
                                load_api_key(true)
                            } else {
                                $('#top-links').show()
                                $('#api-key-form').show()
                            }
                        }
                    });
                    $('#badge-or-label').on('change', function() {
                        $('#badge-position').val($('#badge-position option:first').val())
                        $('#video-quality-badges').val($('#video-quality-badges option:first').val())
                        $('#3d-badges').val($('#3d-badges option:first').val())
                        $('#hdr-badges').val($('#hdr-badges option:first').val())
                        $('#remux-badges').val($('#remux-badges option:first').val())
                        $('#codec-badges').val($('#codec-badges option:first').val())
                        $('#container-badges').val($('#container-badges option:first').val())
                        $('#audio-types').val($('#audio-types option:first').val())
                        $('#pr-types').val($('#pr-types option:first').val())
                        Array.from(document.getElementById('audio-types').options).forEach(el => {
                            if (el.value != 'none-audio') {
                                $('#' + el.value).hide()
                                $('#' + el.value + ' select').val($('#' + el.value + ' select option:first').val())
                            }
                        })
                        $('#label-text').val('')
                        $('#choose-label-view').hide()
                        $('#choose-badge-view').hide()
                        $('#choose-' + $('#badge-or-label').val() + '-view').show()
                    })
                    $('#audio-types').on('change', function() {
                        var newAudioTypeSelect = $('#audio-types').val()
                        Array.from(document.getElementById('audio-types').options).forEach(el => {
                            if (el.value != 'none-audio') {
                                $('#' + el.value).hide()
                                $('#' + el.value + ' select').val($('#' + el.value + ' select option:first').val())
                            }
                        })
                        if (newAudioTypeSelect != 'none-audio') {
                            $('#' + newAudioTypeSelect).show()
                        }
                    })
                    $('#create-poster-type').on('change', function() {
                        var newCreatePosterType = $('#create-poster-type').val()
                        Array.from(document.getElementById('create-poster-type').options).forEach(el => {
                            $('#create-' + el.value).hide()
                            $('#create-' + el.value + ' select').val($('#create-' + el.value + ' select option:first').val())
                        })
                        $('#create-' + newCreatePosterType).show()
                    })
                    $('#choose-search-folder').on('change', function() {
                        var chosenSearchFolderName = $('#choose-search-folder').val()
                        openPosterEdit(searchFolderType, chosenSearchFolderName != 'all-folder' ? chosenSearchFolderName : false)
                    })
                    $('#adv-opts-form input').on('change', function() {
                        updateSettings();
                    })
                    $('#poster-type-opts-form input').on('change', function() {
                        updateSettings();
                    });
                    $('#scan-order-opts-form input').on('change', function() {
                        updateSettings();
                    });
                    $('#scan-type-opts-form input').on('change', function() {
                        updateSettings();
                    });
                    $('#scan-interval-opts-form input').on('change', function() {
                        updateSettings();
                    });
                    $('#overwrite-opts-form input').on('change', function() {
                        updateSettings();
                    });
                    $("#overwrite-option-one").on('change', function() {
                        updateSettings();
                    });
                    $("#overwrite-option-two").on('change', function() {
                        updateSettings();
                    });
                    $("#no-empty-folders").on('change', function() {
                        updateSettings();
                    });
                    $("#no-scan-on-start").on('change', function() {
                        updateSettings();
                    });
                    $("#cache-matches").on('change', function() {
                        updateSettings();
                    });
                    $("#backdrops-option-one").on('change', function() {
                        updateSettings();
                    });
                    $("#movie-textless-option-one").on('change', function() {
                        updateSettings();
                    });
                    $("#series-textless-option-one").on('change', function() {
                        updateSettings();
                    });
                    $('#movie-poster-lang').on('change', function() {
                        updateSettings();
                    });
                    $('#series-poster-lang').on('change', function() {
                        updateSettings();
                    });
                    $("#change-api-key").click(function(e) {
                        e.preventDefault()
                        $('#api-key').val('')
                        $('#opts-holder').hide()
                        $('#api-key-success').hide()
                        $('#note-tier-1').hide()
                        $('#top-links').show()
                        $('#api-key-form').show()
                    });
                    setInterval(pollData, 2000)
                    $('#search-folder-input').keyup(function() {
                        var search = $(this).val()
                        if (!search) {
                            $('.search-list').html('')
                            return;
                        }
                        var rx = new RegExp(searchStrings.forbiddenChar+'([^'+searchStrings.forbiddenChar+']*'+search+'[^'+searchStrings.forbiddenChar+']*)'+searchStrings.forbiddenChar,'gi')
                        var i = 0, searchResults = [];
                        while (result = rx.exec(searchStrings.folders)) {
                            searchResults.push(result[1])
                            i += 1
                            if (i >= 10)
                                break;
                        }
                        $('.search-list').html(searchResults.map(function(el, ij) {
                            return '<div class="folder-line add-search-line" onclick="openFolderPosterEdit('+ij+')">' + el + '</div>'
                        }))

                    })
                }
                // check if password is required:
                $.get('needsPass', function(data) {
                    if ((data || {}).success) {
                        if (!data.required) {
                            init()
                        } else {
                            if (((window || {}).localStorage).getItem && window.localStorage.getItem('rpdbLogin')) {
                                $.get('checkPass?pass=' + encodeURIComponent(window.localStorage.getItem('rpdbLogin')), function(data) {
                                    if ((data || {}).success) {
                                        servPass = window.localStorage.getItem('rpdbLogin')
                                        init()
                                    } else {
                                        $('#pass-error').show()
                                    }
                                })
                            } else {
                                $('#password-check').show()
                            }
                        }
                    }
                })
            });
            function sep(path) {
                return path.includes('/') ? '/' : '\\'
            }
            var prevPath = ''
            var currentPaths = []
            function handleBrowser(path, data) {
                if ((data || {}).success) {
                    if (!path)
                        $('.current-folder').html('<span style="opacity: 0.5">None</span>')
                    else
                        $('.current-folder').text(path)
                    var folders = data.folders || []
                    if (path) {
                        var separator = sep(path)
                        var pathParts = path.split(separator)
                        pathParts.pop()
                        prevPath = pathParts.join(separator)
                        if (separator == '\\' && (path || '').length == 3 && (prevPath || '').length == 2 && !prevPath.includes('\\') && prevPath.endsWith(':')) {
                            // special case for Win when going back from drive letter to main browser screen
                            prevPath = ''
                        }
                        folders.unshift({ path: prevPath, label: '..' })
                    }
                    currentPaths = folders
                    $('.folder-list').html(currentPaths.map(function(el) {
                        return '<div class="folder-line add-line">' + (el.label ? (!path ? el.path + ' (' : '') + el.label + (!path ? ')' : '') : el.path) + '</div>'
                    }))
                    attachBrowseClickListeners()
                    $('#paste-media-folder').hide()
                    $('#add-media-folder').show().scrollTop(0)
                }
            }
            function attachBrowseClickListeners() {
                $(".add-line").click(function(e) {
                    e.preventDefault()
                    var text = $(this).text().trim()
                    var path
                    currentPaths.some(el => {
                        if (el.label == text || (el.path + ' (' + el.label + ')') == text || el.path == text) {
                            path = el.path
                            return true
                        }
                    })
                    $.get('browse?folder=' + encodeURIComponent(path) + '&pass=' + encodeURIComponent(servPass || ''), handleBrowser.bind(null, path))
                })
            }
            var browseMediaType = 'movie'
            function openMovieBrowser() {
                badgeQueryString = false
                browseMediaType = 'movie'
                $('#add-media-folder-title').text('Add Movie Media Folder')
                $('#folder-label').prop('selectedIndex', 0)
                $.get('browse?pass=' + encodeURIComponent(servPass || ''), handleBrowser.bind(null, null))
            }
            function pasteMediaFolder() {
                $('#paste-media-folder-title').text('Add ' + capitalizeFirstLetter(browseMediaType) + ' Media Folder')
                $('#paste-media-path').val('')
                $('#add-media-folder').hide()
                $('#paste-media-folder').show().scrollTop(0)
                $('#paste-media-path').select()
            }
            function addPasteMediaFolder() {
                $('.current-folder').text($('#paste-media-path').val())
                var pastedPath = $('#paste-media-path').val()
                $.get('browse?folder=' + encodeURIComponent(pastedPath) + '&pass=' + encodeURIComponent(servPass || ''), handleBrowser.bind(null, pastedPath))
            }
            function closePasteMediaFolder() {
                $('#paste-media-folder').hide()
                $('#add-media-folder').show().scrollTop(0)
            }
            function updatePage() {
                $.get('getSettings?pass=' + encodeURIComponent(servPass || ''), function(data) {
                    if ((data || {}).success) {
                        $('#history-msg').text('Added images to ' + data.historyCount + ' folders.')
                        $('#watched-folders').text('Watching ' + (data.movieFolders || []).length + ' movie folders and ' + (data.seriesFolders || []).length + ' series folders.')
                    }
                })
            }
            function addFolder() {
                var currentFolder = $('.current-folder').text().trim()
                function handleAddFolderResponse() {
                    updatePage()
                    setTimeout(() => {
                        $('#add-media-folder').hide()
                    })
                }
                if (currentFolder != 'None') {
                    var folderLabel = badgeQueryString || false
                    if (browseMediaType == 'movie') {
                        $.get('addMovieFolder' + (folderLabel ? folderLabel + '&' : '?') + 'folder=' + encodeURIComponent(currentFolder) + '&pass=' + encodeURIComponent(servPass || ''), handleAddFolderResponse)
                    } else {
                        $.get('addSeriesFolder' + (folderLabel ? folderLabel + '&' : '?') + 'folder=' + encodeURIComponent(currentFolder) + '&pass=' + encodeURIComponent(servPass || ''), handleAddFolderResponse)
                    }
                } else {
                    $('#add-media-folder').hide()
                }
            }
            function openSeriesBrowser() {
                badgeQueryString = false
                browseMediaType = 'series'
                $('#add-media-folder-title').text('Add Series Media Folder')
                $('#folder-label').prop('selectedIndex', 0)
                $.get('browse?pass=' + encodeURIComponent(servPass || ''), handleBrowser.bind(null, null))
            }
            function closeBrowser() {
                $('#add-media-folder').hide()
            }
            function openEditSpecificFolder() {
                $('#edit-specific-folder').find('h1.dialog-title').text(specificFolder)
                $('#edit-specific-folder').show().scrollTop(0)
                closeEditMediaFolder()
            }
            function closeEditSpecificFolder() {
                $('#edit-specific-folder').hide()
            }
            function openCreatePoster() {
                $('#create-poster-folder-name').text(searchFolderName)

                $('#submit-poster-success').hide()

                $('#create-poster-img-url').val('')
                $('#create-poster-tmdb-url').val('')
                $('#create-poster-imdb-url').val('')
                $('#create-poster-mc-url').val('')
                $('#create-poster-rt-url').val('')

                $('#create-poster-type').val($('#create-poster-type option:first').val())

                $('#create-poster-default').show()
                $('#create-poster-certs').hide()
                $('#create-poster-mc').hide()
                $('#create-poster-rt').hide()

                $('#create-poster-default-imdb').val('')
                $('#create-poster-default-mc').val('')
                $('#create-poster-default-rt').val('')

                $('#create-poster-certs-imdb').val('')
                $('#create-poster-certs-mc').val('')
                $('#create-poster-certs-rt').val('')
                $('#create-poster-certs-mc-cert').val($('#create-poster-certs-mc-cert option:first').val())
                $('#create-poster-certs-rt-cert').val($('#create-poster-certs-rt-cert option:first').val())

                $('#create-poster-rt-imdb').val('')
                $('#create-poster-rt-rt').val('')
                $('#create-poster-rt-rtaudience').val('')
                $('#create-poster-rt-rt-cert').val($('#create-poster-rt-rt-cert option:first').val())
                $('#create-poster-rt-rtaudience-cert').val($('#create-poster-rt-rtaudience-cert option:first').val())

                $('#create-poster-mc-imdb').val('')
                $('#create-poster-mc-mc').val('')
                $('#create-poster-mc-mcaudience').val('')
                $('#create-poster-mc-mc-cert').val($('#create-poster-mc-mc-cert option:first').val())

                $('#create-poster').show().scrollTop(0)
            }
            function openPreviewCreatePoster() {
                var imgUrl = $('#create-poster-img-url').val()
                var tmdbUrl = $('#create-poster-tmdb-url').val()
                var imdbUrl = $('#create-poster-imdb-url').val()
                var mcUrl = $('#create-poster-mc-url').val()
                var rtUrl = $('#create-poster-rt-url').val()

                var posterType = $('#create-poster-type').val()
                var imdbScore = $('#create-'+posterType+'-imdb').val()
                var rtScore = $('#create-'+posterType+'-rt').val()
                var mcScore = $('#create-'+posterType+'-mc').val()
                var rtAudScore = $('#create-'+posterType+'-rtaudience').val()
                var mcAudScore = $('#create-'+posterType+'-mcaudience').val()
                var rtCert = $('#create-'+posterType+'-rt-cert').val()
                var mcCert = $('#create-'+posterType+'-mc-cert').val()
                var rtAudCert = $('#create-'+posterType+'-rtaudience-cert').val()

                var ratingString = ''

                var extras = ''

                if (posterType == 'poster-default') {
                    ratingString = imdbScore + '|' + rtScore + '|' + mcScore
                } else if (posterType == 'poster-certs') {
                    ratingString = imdbScore + '|' + rtScore + '|' + mcScore
                    extras += (rtCert == 'certified-fresh' ? 'rtCert=1' : rtCert == 'spoiled' ? 'rtCert=-1' : '')
                    extras += (extras ? '&' : '') + (mcCert == 'must-see' ? 'mcCert=1' : '')
                } else if (posterType == 'poster-rt') {
                    ratingString = imdbScore + '|' + rtScore + '|' + rtAudScore
                    extras += (rtCert == 'certified-fresh' ? 'rtCert=1' : rtCert == 'spoiled' ? 'rtCert=-1' : '')
                    extras += (extras ? '&' : '') + (rtAudCert == 'spilled' ? 'rtAudienceCert=-1' : '')
                } else if (posterType == 'poster-mc') {
                    ratingString = imdbScore + '|' + mcScore + '|' + mcAudScore
                    extras += (mcCert == 'must-see' ? 'mcCert=1' : '')
                } else {
                    ratingString = '||'
                }

                if (tmdbUrl)
                    extras += (extras ? '&' : '') + 'tmdbUrl=' + encodeURIComponent(tmdbUrl)

                if (imdbUrl)
                    extras += (extras ? '&' : '') + 'imdbUrl=' + encodeURIComponent(imdbUrl)

                if (rtUrl)
                    extras += (extras ? '&' : '') + 'rtUrl=' + encodeURIComponent(rtUrl)

                if (mcUrl)
                    extras += (extras ? '&' : '') + 'mcUrl=' + encodeURIComponent(mcUrl)

                if (imgUrl)
                    extras += (extras ? '&' : '') + 'img=' + encodeURIComponent(imgUrl)

                extras += (extras ? '&' : '') + 'mediaType=' + searchFolderType

                $('#preview-create-poster-img').attr('src', '').attr('src', '/create-preview?ratings=' + ratingString + '&posterType=' + posterType + (extras ? '&' + extras + '&extras=' + encodeURIComponent(extras) : '') + '&pass=' + encodeURIComponent(servPass || ''))

                $('#preview-create-poster').show().scrollTop(0)
            }
            function saveCreatePoster() {
                var imgUrl = $('#create-poster-img-url').val()
                var tmdbUrl = $('#create-poster-tmdb-url').val()
                var imdbUrl = $('#create-poster-imdb-url').val()
                var mcUrl = $('#create-poster-mc-url').val()
                var rtUrl = $('#create-poster-rt-url').val()

                var posterType = $('#create-poster-type').val()
                var imdbScore = $('#create-'+posterType+'-imdb').val()
                var rtScore = $('#create-'+posterType+'-rt').val()
                var mcScore = $('#create-'+posterType+'-mc').val()
                var rtAudScore = $('#create-'+posterType+'-rtaudience').val()
                var mcAudScore = $('#create-'+posterType+'-mcaudience').val()
                var rtCert = $('#create-'+posterType+'-rt-cert').val()
                var mcCert = $('#create-'+posterType+'-mc-cert').val()
                var rtAudCert = $('#create-'+posterType+'-rtaudience-cert').val()

                var ratingString = ''

                var extras = ''

                if (posterType == 'poster-default') {
                    ratingString = imdbScore + '|' + rtScore + '|' + mcScore
                } else if (posterType == 'poster-certs') {
                    ratingString = imdbScore + '|' + rtScore + '|' + mcScore
                    extras += (rtCert == 'certified-fresh' ? 'rtCert=1' : rtCert == 'spoiled' ? 'rtCert=-1' : '')
                    extras += (extras ? '&' : '') + (mcCert == 'must-see' ? 'mcCert=1' : '')
                } else if (posterType == 'poster-rt') {
                    ratingString = imdbScore + '|' + rtScore + '|' + rtAudScore
                    extras += (rtCert == 'certified-fresh' ? 'rtCert=1' : rtCert == 'spoiled' ? 'rtCert=-1' : '')
                    extras += (extras ? '&' : '') + (rtAudCert == 'spilled' ? 'rtAudienceCert=-1' : '')
                } else if (posterType == 'poster-mc') {
                    ratingString = imdbScore + '|' + mcScore + '|' + mcAudScore
                    extras += (mcCert == 'must-see' ? 'mcCert=1' : '')
                } else {
                    ratingString = '||'
                }

                if (tmdbUrl)
                    extras += (extras ? '&' : '') + 'tmdbUrl=' + encodeURIComponent(tmdbUrl)

                if (imdbUrl)
                    extras += (extras ? '&' : '') + 'imdbUrl=' + encodeURIComponent(imdbUrl)

                if (rtUrl)
                    extras += (extras ? '&' : '') + 'rtUrl=' + encodeURIComponent(rtUrl)

                if (mcUrl)
                    extras += (extras ? '&' : '') + 'mcUrl=' + encodeURIComponent(mcUrl)

                if (imgUrl)
                    extras += (extras ? '&' : '') + 'img=' + encodeURIComponent(imgUrl)

                extras += (extras ? '&' : '') + 'mediaType=' + searchFolderType

                $.get('create-poster?ratings=' + ratingString + '&folder=' + encodeURIComponent(searchFolderName) + '&posterType=' + posterType + (extras ? '&' + extras + '&extras=' + encodeURIComponent(extras) : '') + '&pass=' + encodeURIComponent(servPass || ''), () => {
                    cancelCreatePoster()
                    openFolderPosterEdit(false, searchFolderName)
                })
            }
            function submitCreatePoster() {
                var imgUrl = $('#create-poster-img-url').val()
                var tmdbUrl = $('#create-poster-tmdb-url').val()
                var imdbUrl = $('#create-poster-imdb-url').val()
                var mcUrl = $('#create-poster-mc-url').val()
                var rtUrl = $('#create-poster-rt-url').val()

                var posterType = $('#create-poster-type').val()
                var imdbScore = $('#create-'+posterType+'-imdb').val()
                var rtScore = $('#create-'+posterType+'-rt').val()
                var mcScore = $('#create-'+posterType+'-mc').val()
                var rtAudScore = $('#create-'+posterType+'-rtaudience').val()
                var mcAudScore = $('#create-'+posterType+'-mcaudience').val()
                var rtCert = $('#create-'+posterType+'-rt-cert').val()
                var mcCert = $('#create-'+posterType+'-mc-cert').val()
                var rtAudCert = $('#create-'+posterType+'-rtaudience-cert').val()

                var ratingString = ''

                var extras = ''

                if (posterType == 'poster-default') {
                    ratingString = imdbScore + '|' + rtScore + '|' + mcScore
                } else if (posterType == 'poster-certs') {
                    ratingString = imdbScore + '|' + rtScore + '|' + mcScore
                    extras += (rtCert == 'certified-fresh' ? 'rtCert=1' : rtCert == 'spoiled' ? 'rtCert=-1' : '')
                    extras += (extras ? '&' : '') + (mcCert == 'must-see' ? 'mcCert=1' : '')
                } else if (posterType == 'poster-rt') {
                    ratingString = imdbScore + '|' + rtScore + '|' + rtAudScore
                    extras += (rtCert == 'certified-fresh' ? 'rtCert=1' : rtCert == 'spoiled' ? 'rtCert=-1' : '')
                    extras += (extras ? '&' : '') + (rtAudCert == 'spilled' ? 'rtAudienceCert=-1' : '')
                } else if (posterType == 'poster-mc') {
                    ratingString = imdbScore + '|' + mcScore + '|' + mcAudScore
                    extras += (mcCert == 'must-see' ? 'mcCert=1' : '')
                } else {
                    ratingString = '||'
                }

                if (tmdbUrl)
                    extras += (extras ? '&' : '') + 'tmdbUrl=' + encodeURIComponent(tmdbUrl)

                if (imdbUrl)
                    extras += (extras ? '&' : '') + 'imdbUrl=' + encodeURIComponent(imdbUrl)

                if (rtUrl)
                    extras += (extras ? '&' : '') + 'rtUrl=' + encodeURIComponent(rtUrl)

                if (mcUrl)
                    extras += (extras ? '&' : '') + 'mcUrl=' + encodeURIComponent(mcUrl)

                if (imgUrl)
                    extras += (extras ? '&' : '') + 'img=' + encodeURIComponent(imgUrl)

                extras += (extras ? '&' : '') + 'mediaType=' + searchFolderType

                $.get('submit-poster?ratings=' + ratingString + '&posterType=' + posterType + (extras ? '&' + extras + '&extras=' + encodeURIComponent(extras) : '') + '&pass=' + encodeURIComponent(servPass || ''), () => {
                    $('#submit-poster-success').show()
                })
            }
            function closePreviewCreatePoster() {
                $('#preview-create-poster').hide()
                $('#preview-create-poster-img').attr('src', '')
            }
            function cancelCreatePoster() {
                $('#create-poster').hide()
            }
            function forceOverwriteScanSpecific() {
                $.get('forceOverwriteScan?folder=' + encodeURIComponent(specificFolder) + '&type=' + (specificFolderMovie ? 'movie' : 'series') + '&pass=' + encodeURIComponent(servPass || ''), function(data) {});
            }
            function runFullScanSpecific() {
                $.get('runFullScan?folder=' + encodeURIComponent(specificFolder) + '&type=' + (specificFolderMovie ? 'movie' : 'series') + '&pass=' + encodeURIComponent(servPass || ''), function(data) {});
            }
            function removeSpecificFolder() {
                function handleRemoveFolderResponse(data) {
                    if ((data || {}).success) {
                        closeEditSpecificFolder()
                    }
                }
                if (specificFolderMovie) {
                    $.get('removeMovieFolder?folder=' + encodeURIComponent(specificFolder) + '&pass=' + encodeURIComponent(servPass || ''), handleRemoveFolderResponse)
                } else {
                    $.get('removeSeriesFolder?folder=' + encodeURIComponent(specificFolder) + '&pass=' + encodeURIComponent(servPass || ''), handleRemoveFolderResponse)
                }
            }
            var specificFolder = ''
            var specificFolderMovie = false
            function attachRemoveFolderClickListeners() {
                $(".edit-line").click(function(e) {
                    e.preventDefault()
                    specificFolder = $(this).text().trim()
                    if ($(this).hasClass('movie-line')) {
                        specificFolderMovie = true
                    } else {
                        specificFolderMovie = false
                    }
                    openEditSpecificFolder()
                })
            }
            function editMediaFolder() {
                $.get('getSettings?pass=' + encodeURIComponent(servPass || ''), function(data) {
                    if ((data || {}).success) {
                        if ((data.movieFolders || []).length) {
                            $('.edit-movie-folder-list').html(data.movieFolders.map((el, ij) => {
                                return '<div class="folder-line edit-line movie-line"' + (!ij ? ' style="border-top: 1px solid rgba(0,0,0,0.3)"' : '') + '>' + el + '</div>'
                            }))
                        } else {
                            $('.edit-movie-folder-list').html('<span style="opacity: 0.5">None Added</span>')
                        }
                        if ((data.seriesFolders || []).length) {
                            $('.edit-series-folder-list').html(data.seriesFolders.map((el, ij) => {
                                return '<div class="folder-line edit-line series-line"' + (!ij ? ' style="border-top: 1px solid rgba(0,0,0,0.3)"' : '') + '>' + el + '</div>'
                            }))
                        } else {
                            $('.edit-series-folder-list').html('<span style="opacity: 0.5">None Added</span>')
                        }
                        $('#edit-media-folder').show().scrollTop(0)
                        attachRemoveFolderClickListeners()
                    }
                })
            }
            function closeEditMediaFolder() {
                updatePage()
                $('#edit-media-folder').hide()
            }
            function openFixMatch() {
                $('#fix-media-match').find('h1.dialog-title').text('Fix Match for ' + searchFolderName)
                $('#fix-media-match').show().scrollTop(0)
                $('#imdb-url').select()
            }
            function closeFixMediaFolder() {
                $('.fix-error-message').hide()
                openFolderPosterEdit(false, searchFolderName, true)
                $('#fix-media-match').hide()
            }
            function closeChooseMediaFolder() {
                searchStrings = {}
                $('#choose-media-folder-type').hide()
            }
            function capitalizeFirstLetter(string) {
              return string.charAt(0).toUpperCase() + string.slice(1);
            }
            function openChooseFolderTypes(type) {
                searchFolderType = type
                $('#choose-folder-types').show().scrollTop(0)
            }
            function closeChooseFolderTypes() {
                $('#choose-folder-types').hide()
            }
            function openSearchFolderEdit() {
                console.log('type: ' + searchFolderType)
                openPosterEdit(searchFolderType)
                setTimeout(function() { closeChooseFolderTypes() })
            }
            function openChooseFolderByImdb() {
                $('#choose-imdb-url').val('')
                $('.choose-imdb-error-message').text('')
                $('.choose-imdb-error-message').hide()
                $('#choose-folder-by-imdb').find('h1.dialog-title').text('Choose ' + capitalizeFirstLetter(searchFolderType) + ' Folder by IMDB ID')
                $('#choose-folder-by-imdb').show().scrollTop(0)
                $('#choose-imdb-url').select()
                closeChooseFolderTypes()
            }
            function closeChooseFolderByImdb() {
                $('#choose-imdb-url').val('')
                $('.choose-imdb-error-message').text('')
                $('.choose-imdb-error-message').hide()
                $('#choose-folder-by-imdb').hide()
            }
            function openPosterEdit(type, searchFolderName) {
                searchFolderType = type
                $.get('searchStrings?type=' + type + (searchFolderName ? '&searchfolder=' + searchFolderName : '') + '&pass=' + encodeURIComponent(servPass || ''), function(data) {
                    if (((data || {}).folders || '').length) {
                        searchStrings = data
                        $('#choose-media-folder-type').hide()
                        $('#search-folder-input').val('')
                        $('#search-folder').find('h1.dialog-title').text('Search ' + capitalizeFirstLetter(type) + ' Folders')
                        $('#search-folder').show().scrollTop(0)
                        $('.search-list').html('')
                        $('#choose-search-folder').empty()
                        $('#choose-search-folder').append(new Option('All Folders', 'all-folders'))

                        data.folderChoices.forEach(function(el) {
                            $('#choose-search-folder').append(new Option(el, el, false, !!(el == searchFolderName)))
                        })
                        setTimeout(() => {
                            $('#search-folder-input').select()
                        })
                    }
                })
            }
            function openMoviePosterEdit() { openPosterEdit('movie') }
            function openSeriesPosterEdit() { openPosterEdit('series') }
            function closeSearchFolder() {
                searchStrings = {}
                $('#search-folder').hide()
            }
            var editPosterSelectType = false
            function editPosterByImdb() {
                editPosterSelectType = 'imdb'
                var tempName = $('#choose-imdb-url').val()
                if (tempName.startsWith('https://www.imdb.com/title/')) {
                    tempName = tempName.replace('https://www.imdb.com/title/','')
                    if (tempName.startsWith('tt') && tempName.includes('/')) {
                        tempName = tempName.substr(0, tempName.indexOf('/'))
                    }
                }
                if (tempName.startsWith('tt') && !isNaN(tempName.replace('tt',''))) {
                    searchFolderName = tempName
                    $('.fix-match-button').prop('disabled', true)
                    $('#update-ratings-poster-msg').hide()
                    $('#folder-poster-edit').find('h1.dialog-title').text(searchFolderName)
                    $('#folder-poster-edit-img').attr('src','');
                    setTimeout(() => {
                        $('#folder-poster-edit-img').attr('src', '/poster?type=' + searchFolderType + '&name=' + encodeURIComponent(searchFolderName) + '&break=' + Date.now() + '&pass=' + encodeURIComponent(servPass || ''))
                    })
                    badgeQueryString = false
                    $('#folder-poster-edit').show().scrollTop(0)
                    closeChooseFolderByImdb()
                } else {
                    $('.choose-imdb-error-message').text('Invalid IMDB URL or IMDB ID')
                    $('.choose-imdb-error-message').show()
                }
                return false
            }
            function openFolderPosterEdit(ij, srcFolderName, noReloadImg) {
                if (ij !== false) {
                    editPosterSelectType = 'search'
                }
                $('#update-ratings-poster-msg').hide()
                searchFolderName = srcFolderName || $($('.add-search-line')[ij]).text()
                $('.fix-match-button').prop('disabled', false)
                $('#update-ratings-poster-msg').hide()
                $('.search-list').html('')
                searchStrings = {}
                $('#search-folder').hide()
                $('#folder-poster-edit').find('h1.dialog-title').text(searchFolderName)
                if (!noReloadImg) {
                    $('#folder-poster-edit-img').attr('src','');
                    setTimeout(() => {
                        $('#folder-poster-edit-img').attr('src', '/poster?type=' + searchFolderType + '&name=' + encodeURIComponent(searchFolderName) + '&break=' + Date.now() + '&pass=' + encodeURIComponent(servPass || ''))
                    })
                }
                badgeQueryString = false
                $('#folder-poster-edit').show().scrollTop(0)
            }
            function closeFolderPosterEdit() {
                $('#folder-poster-edit').hide()
            }
            function backToSearch() {
                if (editPosterSelectType == 'search')
                    openPosterEdit(searchFolderType)
                else if (editPosterSelectType == 'imdb')
                    openChooseFolderByImdb()
                setTimeout(() => {
                    $('#folder-poster-edit').hide()
                }, 100)
            }
            function addFixMatch() {
                var imdbUrl = $('#imdb-url').val()
                $.get('addFixMatch?folder=' + encodeURIComponent(searchFolderName) + '&imdb=' + encodeURIComponent(imdbUrl) + '&type=' + searchFolderType + '&pass=' + encodeURIComponent(servPass || ''), function(data) {
                    if ((data || {}).success) {
                        openFolderPosterEdit(false, searchFolderName)
                        $('#imdb-url').val('')
                        $('.fix-error-message').hide()
                        $('#fix-media-match').hide()
                    } else if ((data || {}).message) {
                        $('.fix-error-message').text(data.message)
                        $('.fix-error-message').show()
                    } else {
                        $('.fix-error-message').text('Unknown error occurred')
                        $('.fix-error-message').show()
                    }
                })
                return false
            }
            var choosePosterData = {}
            function loadPostersForLang() {
                var tmdbPrefix = 'https://www.themoviedb.org/t/p/w342'
                var langChoice = $('#choose-poster-lang').children("option:selected").val()
                var langPosters = (langChoice == 'none' ? choosePosterData.items : choosePosterData.items.filter(function(item) { return item.lang == langChoice })).slice(0, 25).map(function(el) { return tmdbPrefix + el.file_path })
                $('#poster-choices').html('')
                langPosters.forEach(function(el, ij) {
                    $('#poster-choices').append('<img src="' + el + '" class="poster-choice-img" onclick="useThisPoster('+ij+')">')
                })
            }
            function useThisPoster(ij) {
                var thisPoster = $($('.poster-choice-img')[ij]).attr('src').split('/').pop()
                $.get('tmdb-poster?folder=' + encodeURIComponent(searchFolderName) + '&type=' + searchFolderType + '&tmdbPoster=' + thisPoster + '&pass=' + encodeURIComponent(servPass || ''), function(data) {
                    if ((data || {}).success) {
                        openFolderPosterEdit(false, searchFolderName)
                        $('#poster-choices').html('')
                        $('#choose-poster').hide()
                    } else if ((data || {}).message) {
                        $('.fix-error-message').text(data.message)
                        $('.fix-error-message').show()
                    } else {
                        $('.fix-error-message').text('Unknown error occurred')
                        $('.fix-error-message').show()
                    }
                })
            }
            function openChoosePoster() {
                $('#choose-poster').find('h1.dialog-title').text(searchFolderName)
                $('#choose-poster').show().scrollTop(0)
                $('#folder-poster-edit').hide()
                $.get('poster-choices?type=' + searchFolderType + '&name=' + encodeURIComponent(searchFolderName) + '&pass=' + encodeURIComponent(servPass || ''), function(data) {
                    if (((data || {}).items || []).length) {
                        choosePosterData = data
                        $('#choose-poster-lang').empty()
                        $('#choose-poster-lang').append(new Option('None', 'none'))

                        var langs = data.items.map(function(el) { return el.lang })
                        langs = langs.filter(function(item, pos) { return item && langs.indexOf(item) == pos })
                        langs.forEach(function(el) {
                            $('#choose-poster-lang').append(new Option(el, el))
                        })
                    } else {
                        choosePosterData = { items: [] }
                    }
                })
            }
            function closeChoosePoster() {
                openFolderPosterEdit(false, searchFolderName, true)
                $('#choose-poster').hide()
            }
            function openCustomPoster() {
                $('#custom-poster-input').val('')
                $('#custom-poster').find('h1.dialog-title').text(searchFolderName)
                $('#custom-poster').show().scrollTop(0)
                $('#folder-poster-edit').hide()
            }
            function loadCustomPoster() {
                var thisPoster = $('#custom-poster-input').val()
                $.get('custom-poster?folder=' + encodeURIComponent(searchFolderName) + '&type=' + searchFolderType + '&customPoster=' + encodeURIComponent(thisPoster) + '&pass=' + encodeURIComponent(servPass || ''), function(data) {
                    if ((data || {}).success) {
                        openFolderPosterEdit(false, searchFolderName)
                        $('#custom-poster-input').val('')
                        $('#custom-poster').hide()
                    } else if ((data || {}).message) {
                        $('.fix-error-message').text(data.message)
                        $('.fix-error-message').show()
                    } else {
                        $('.fix-error-message').text('Unknown error occurred')
                        $('.fix-error-message').show()
                    }
                })
            }
            function updateRatingsPoster() {
                $.get('update-ratings-poster?folder=' + encodeURIComponent(searchFolderName) + '&type=' + searchFolderType + '&pass=' + encodeURIComponent(servPass || ''), function(data) {
                    if ((data || {}).success) {
                        $('#update-ratings-poster-msg').html('<br/>Successfully Updated Poster')
                    } else if ((data || {}).message) {
                        $('#update-ratings-poster-msg').html('<br/>'+data.message)
                    } else {
                        $('#update-ratings-poster-msg').html('<br/>Unknown Error Occurred While Updating Poster')
                    }
                    $('#update-ratings-poster-msg').show()
                })
            }
            function closeCustomPoster() {
                openFolderPosterEdit(false, searchFolderName, true)
                $('#custom-poster').hide()
            }
            function openChoosePassword() {
                $('#choose-password').show().scrollTop(0)
            }
            function closeChoosePassword() {
                $('#choose-password').hide()
                $('#pass-error').hide()
            }
            function openScanSettings() {
                $('#scan-settings').show().scrollTop(0)
            }
            function closeScanSettings() {
                $('#scan-settings').hide()
            }
            function runFullScan() {
                $.get('runFullScan?pass=' + encodeURIComponent(servPass || ''), function(data) {});
            }
            function forceOverwriteScan() {
                $.get('forceOverwriteScan?pass=' + encodeURIComponent(servPass || ''), function(data) {});
            }
            function cancelScan() {
                $.get('cancelScan?pass=' + encodeURIComponent(servPass || ''), function(data) {});
            }
            function openCheckRequests() {
                $.get('checkRequests?pass=' + encodeURIComponent(servPass || ''), function(data) {
                    if (data.req && data.limit) {
                        $('#request-count').text('Requests: ' + data.req + ' / Limit: ' + data.limit)
                        $('#check-requests').show().scrollTop(0)
                    }
                })
            }
            function closeCheckRequests() {
                $('#check-requests').hide()
                $('#request-count').text('')
            }
            function openAddBadges() {
                badgeQueryString = false
                $('#badge-position').val($('#badge-position option:first').val())
                $('#video-quality-badges').val($('#video-quality-badges option:first').val())
                $('#3d-badges').val($('#3d-badges option:first').val())
                $('#hdr-badges').val($('#hdr-badges option:first').val())
                $('#remux-badges').val($('#remux-badges option:first').val())
                $('#codec-badges').val($('#codec-badges option:first').val())
                $('#container-badges').val($('#container-badges option:first').val())
                $('#audio-types').val($('#audio-types option:first').val())
                $('#pr-types').val($('#pr-types option:first').val())
                Array.from(document.getElementById('audio-types').options).forEach(el => {
                    if (el.value != 'none-audio') {
                        $('#' + el.value).hide()
                        $('#' + el.value + ' select').val($('#' + el.value + ' select option:first').val())
                    }
                })
                $('#label-text').val('')
                $('#badge-or-label').val($('#badge-or-label option:first').val())
                $('#choose-label-view').hide()
                $('#choose-badge-view').show()
                $('#choose-badge-settings').show().scrollTop(0)
            }

            function openPreviewPoster() {
                var tempBadgeString = ''
                var queryString = ''
                if ($('#label-text').val()) {
                    queryString = '?label=' + encodeURIComponent($('#label-text').val())
                } else {
                    var badgePos = $('#badge-position').val()
                    var badgeData = [
                        $('#video-quality-badges').val(),
                        $('#3d-badges').val(),
                        $('#hdr-badges').val(),
                        $('#remux-badges').val(),
                        $('#codec-badges').val(),
                        $('#container-badges').val(),
                    ].filter(function(el) { return el !== 'none' })

                    var audioBadge = false
                    Array.from(document.getElementById('audio-types').options).forEach(el => {
                        if (el.value != 'none-audio') {
                            if ($('#' + el.value + ' select').val() !== 'none') {
                                audioBadge = $('#' + el.value + ' select').val()
                            }
                        }
                    })

                    if (audioBadge)
                        badgeData.push(audioBadge)

                    if ($('#pr-types').val() != 'none')
                        badgeData.push($('#pr-types').val())

                    if (badgeData.length) {
                        tempBadgeString = badgeData.join(',')
                        queryString = '?badges=' + encodeURIComponent(tempBadgeString)
                        if (badgePos && badgePos != 'left')
                            queryString += '&badgePos=' + badgePos
                    }

                }

                $('#preview-poster-img').attr('src', '/preview' + (queryString.length ? queryString + '&' : '?') + '&pass=' + encodeURIComponent(servPass || ''))

                $('#preview-poster').show().scrollTop(0)
            }

            function closePreviewPoster() {
                $('#preview-poster-img').attr('src', '')
                $('#preview-poster').hide()
            }

            var badgeQueryString

            function cancelAddBadges() {
                $('#choose-badge-settings').hide()
            }

            function saveAddBadges() {
                if ($('#label-text').val()) {
                    badgeQueryString = '?label=' + encodeURIComponent($('#label-text').val())
                } else {

                    var badgePos = $('#badge-position').val()
                    var badgeData = [
                        $('#video-quality-badges').val(),
                        $('#3d-badges').val(),
                        $('#hdr-badges').val(),
                        $('#remux-badges').val(),
                        $('#codec-badges').val(),
                        $('#container-badges').val(),
                    ].filter(function(el) { return el !== 'none' })
                    var audioBadge = false
                    Array.from(document.getElementById('audio-types').options).forEach(el => {
                        if (el.value != 'none-audio') {
                            if ($('#' + el.value + ' select').val() !== 'none') {
                                audioBadge = $('#' + el.value + ' select').val()
                            }
                        }
                    })

                    if (audioBadge)
                        badgeData.push(audioBadge)

                    if ($('#pr-types').val() != 'none')
                        badgeData.push($('#pr-types').val())

                    if (badgeData.length) {
                        badgeQueryString = '?badges=' + encodeURIComponent(badgeData.join(','))
                        if (badgePos && badgePos != 'left')
                            badgeQueryString += '&badgePos=' + badgePos
                    }

                }

                if ($("#edit-specific-folder").is(":visible") && specificFolder && badgeQueryString) {
                    $.get('editFolderLabel' + (badgeQueryString ? badgeQueryString + '&' : '?') + 'folder=' + encodeURIComponent(specificFolder) + '&pass=' + encodeURIComponent(servPass || ''), function(data) {})
                } else if ($("#folder-poster-edit").is(":visible") && searchFolderName && searchFolderType && badgeQueryString) {
                    $('#folder-poster-edit-img').attr('src','');
                    $.get('editItemLabel' + (badgeQueryString ? badgeQueryString + '&' : '?') + 'folder=' + encodeURIComponent(searchFolderName) + '&type=' + searchFolderType + '&pass=' + encodeURIComponent(servPass || ''), function(data) {
                        setTimeout(() => {
                            $('#folder-poster-edit-img').attr('src', '/poster?type=' + searchFolderType + '&name=' + encodeURIComponent(searchFolderName) + '&break=' + Date.now() + '&pass=' + encodeURIComponent(servPass || ''))
                        })
                    })
                }

                $('#choose-badge-settings').hide()
            }

            function pollData() {
                $.get('pollData?pass=' + encodeURIComponent(servPass || ''), function(data) {
                    if ((data || {}).success) {
                        $('#history-msg').text('Added images to ' + data.historyCount + ' folders.')
                        var dt = new Date(parseInt(data.lastFullUpdate))
                        $('#full-scan-msg').html('Last full scan started:<br/><br/>' + dt.toLocaleString())
                        $('.scan-status').text(data.scanItems ? 'Scanning (' + data.scanItems + ' items in queue)' : 'Idle, not scanning')
                    }
                });
            }

            function openPosterSettings() {
                $('#poster-settings').show().scrollTop(0)
            }

            function closePosterSettings() {
                $('#poster-settings').hide()
            }

            function openTier3onlyMessage() {
                $('#tier-3-only-message').show().scrollTop(0)
            }

            function closeTier3onlyMessage() {
                $('#tier-3-only-message').hide()
            }
        </script>
    </body>
</html>
